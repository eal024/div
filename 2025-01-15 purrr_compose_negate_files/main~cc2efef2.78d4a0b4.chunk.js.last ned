(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[53],{128:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d}));var r=n(8);const a=e=>e.getIn(["chapter","current"])||Object(r.Map)(),s=e=>a(e).get("title"),o=e=>a(e).get("number"),c=e=>a(e).get("id"),i=e=>e.getIn(["chapter","window"],Object(r.Map)()),u=e=>e.getIn(["chapter","firstTimeCompletedChapters"])||Object(r.Map)(),d=e=>a(e).get("is_last_chapter")},139:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>e.get("learningMode")},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const r={FAILED:"FAILED",SUCCESS:"SUCCESS",NOT_FETCHED:"NOT_FETCHED"},a=e=>e.get("preFetchedData")},190:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return S}));var r=n(8),a=n(25);const s=()=>{},o={COURSE_OUTLINE:{code:"course_outline"},KEYBOARD_SHORTCUTS:{code:"keyboard_shortcuts"},ISSUE_REPORTER:{code:"issue_reporter"},IFRAME:{code:"iframe"},FEEDBACK_REPORTER:{code:"feedback_reporter"},LOGIN:{code:"login",onExit:s},SLIDES:{code:"slides"},COURSE_NOTES:{code:"course_notes"},LTI_FAILURE:{code:"ltiFailure",onExit:s},CHAPTER_RATING:{code:"chapter-rating",onExit:s},MOBILE_POPUP:{code:"mobile-popup"},VIDEO:{code:"video"},GUIDES:{code:"guides"},DOWNLOAD_DATASETS:{code:"download_datasets"},SCREEN_LARGER:{code:"screen_larger"},INTERACT_WITH_FLOATING_PANE:{code:"interact_with_floating_pane"},REFERENCE_MATERIAL:{code:"reference_material"},LOADING_WORKBOOKS:{code:"loading_workbooks"},DASHBOARD_SURVEY:{code:"dashboard_survey"},SHOW_LEARN_RECAP:{code:"show_learn_recap"},SHOW_OR_SKIP_RECAP:{code:"show_or_skip_recap"},ARCHIVED_RESOURCE:{code:"archived_resource"},COURSE_REVIEW:{code:"course_review",onExit:s}},c={NO_MODAL:"NO_MODAL",WAFFLES_DIALOG:"WAFFLES_DIALOG"},i=e=>e.get("settings")||Object(r.Map)(),u=e=>i(e).get("shortcutsUsage",0),d=e=>i(e).get("shouldCloseShortcutFrame",!1),l=e=>i(e).get("modal")||Object(r.Map)(),p=e=>i(e).get("shouldStopBackendManager")||!1,g=Object(a.createSelector)(i,e=>e.get("uiTheme")),b=Object(a.createSelector)(g,e=>"DARK"===e),f=Object(a.createSelector)(b,e=>!e),m=Object(a.createSelector)(i,e=>e.get("feedbackRatingStatus")),S=Object(a.createSelector)(i,e=>e.get("mobileView"))},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"o",(function(){return r.f})),n.d(t,"p",(function(){return r.g})),n.d(t,"m",(function(){return r.e})),n.d(t,"k",(function(){return r.c})),n.d(t,"j",(function(){return r.b})),n.d(t,"l",(function(){return r.d})),n.d(t,"Rc",(function(){return r.h})),n.d(t,"Mb",(function(){return a})),n.d(t,"c",(function(){return s.b})),n.d(t,"b",(function(){return s.a})),n.d(t,"lb",(function(){return s.d})),n.d(t,"mb",(function(){return s.e})),n.d(t,"kb",(function(){return s.c})),n.d(t,"u",(function(){return o.a})),n.d(t,"x",(function(){return o.d})),n.d(t,"w",(function(){return o.c})),n.d(t,"v",(function(){return o.b})),n.d(t,"y",(function(){return o.e})),n.d(t,"qb",(function(){return o.g})),n.d(t,"F",(function(){return c.b})),n.d(t,"H",(function(){return c.e})),n.d(t,"Cb",(function(){return c.i})),n.d(t,"ec",(function(){return c.k})),n.d(t,"gc",(function(){return c.l})),n.d(t,"Cc",(function(){return c.p})),n.d(t,"Bc",(function(){return c.o})),n.d(t,"Dc",(function(){return c.q})),n.d(t,"G",(function(){return c.c})),n.d(t,"J",(function(){return c.g})),n.d(t,"I",(function(){return c.f})),n.d(t,"kc",(function(){return c.m})),n.d(t,"lc",(function(){return c.n})),n.d(t,"Nc",(function(){return c.r})),n.d(t,"yb",(function(){return c.h})),n.d(t,"bc",(function(){return c.j})),n.d(t,"P",(function(){return i.a})),n.d(t,"X",(function(){return u.r})),n.d(t,"Pb",(function(){return u.G})),n.d(t,"K",(function(){return u.i})),n.d(t,"Zb",(function(){return u.M})),n.d(t,"r",(function(){return u.e})),n.d(t,"f",(function(){return u.a})),n.d(t,"T",(function(){return u.n})),n.d(t,"S",(function(){return u.m})),n.d(t,"zc",(function(){return u.R})),n.d(t,"N",(function(){return u.l})),n.d(t,"L",(function(){return u.j})),n.d(t,"Rb",(function(){return u.I})),n.d(t,"Gc",(function(){return u.S})),n.d(t,"ab",(function(){return u.t})),n.d(t,"Y",(function(){return u.s})),n.d(t,"V",(function(){return u.p})),n.d(t,"cb",(function(){return u.u})),n.d(t,"Nb",(function(){return u.F})),n.d(t,"Db",(function(){return u.C})),n.d(t,"hc",(function(){return u.N})),n.d(t,"D",(function(){return u.h})),n.d(t,"db",(function(){return u.v})),n.d(t,"C",(function(){return u.g})),n.d(t,"Tb",(function(){return u.J})),n.d(t,"ib",(function(){return u.x})),n.d(t,"qc",(function(){return u.Q})),n.d(t,"n",(function(){return u.c})),n.d(t,"ob",(function(){return u.z})),n.d(t,"oc",(function(){return u.O})),n.d(t,"q",(function(){return u.d})),n.d(t,"Hb",(function(){return u.D})),n.d(t,"vb",(function(){return u.B})),n.d(t,"Qb",(function(){return u.H})),n.d(t,"W",(function(){return u.q})),n.d(t,"U",(function(){return u.o})),n.d(t,"pb",(function(){return u.A})),n.d(t,"Ib",(function(){return u.E})),n.d(t,"gb",(function(){return u.w})),n.d(t,"pc",(function(){return u.P})),n.d(t,"Wb",(function(){return u.L})),n.d(t,"jb",(function(){return u.y})),n.d(t,"i",(function(){return u.b})),n.d(t,"s",(function(){return u.f})),n.d(t,"M",(function(){return u.k})),n.d(t,"Qc",(function(){return u.U})),n.d(t,"Pc",(function(){return u.T})),n.d(t,"Xb",(function(){return b})),n.d(t,"Gb",(function(){return f})),n.d(t,"R",(function(){return m})),n.d(t,"cc",(function(){return S})),n.d(t,"ac",(function(){return h})),n.d(t,"dc",(function(){return y})),n.d(t,"Ob",(function(){return E})),n.d(t,"tb",(function(){return _})),n.d(t,"ub",(function(){return I})),n.d(t,"sb",(function(){return T})),n.d(t,"mc",(function(){return v})),n.d(t,"Ub",(function(){return R})),n.d(t,"wb",(function(){return C})),n.d(t,"Vb",(function(){return A})),n.d(t,"g",(function(){return j.a})),n.d(t,"Yb",(function(){return j.b})),n.d(t,"e",(function(){return P.b})),n.d(t,"d",(function(){return P.a})),n.d(t,"fc",(function(){return P.g})),n.d(t,"ic",(function(){return P.h})),n.d(t,"jc",(function(){return P.i})),n.d(t,"Kb",(function(){return P.f})),n.d(t,"nc",(function(){return P.j})),n.d(t,"rb",(function(){return P.d})),n.d(t,"bb",(function(){return P.c})),n.d(t,"Jb",(function(){return P.e})),n.d(t,"Q",(function(){return K})),n.d(t,"fb",(function(){return X})),n.d(t,"Ac",(function(){return q})),n.d(t,"h",(function(){return w.a})),n.d(t,"Fc",(function(){return w.j})),n.d(t,"Oc",(function(){return w.q})),n.d(t,"Hc",(function(){return w.k})),n.d(t,"zb",(function(){return w.e})),n.d(t,"Ab",(function(){return w.f})),n.d(t,"Bb",(function(){return w.g})),n.d(t,"Lb",(function(){return w.h})),n.d(t,"Mc",(function(){return w.p})),n.d(t,"Jc",(function(){return w.m})),n.d(t,"Kc",(function(){return w.n})),n.d(t,"Ic",(function(){return w.l})),n.d(t,"Lc",(function(){return w.o})),n.d(t,"Ec",(function(){return w.i})),n.d(t,"nb",(function(){return w.c})),n.d(t,"xb",(function(){return w.d})),n.d(t,"eb",(function(){return w.b})),n.d(t,"E",(function(){return J})),n.d(t,"Sc",(function(){return Q})),n.d(t,"xc",(function(){return ne})),n.d(t,"tc",(function(){return re})),n.d(t,"uc",(function(){return ae})),n.d(t,"sc",(function(){return se})),n.d(t,"wc",(function(){return oe})),n.d(t,"O",(function(){return ce})),n.d(t,"rc",(function(){return ie})),n.d(t,"vc",(function(){return ue})),n.d(t,"yc",(function(){return le})),n.d(t,"Eb",(function(){return g.a})),n.d(t,"Sb",(function(){return pe})),n.d(t,"Tc",(function(){return be})),n.d(t,"z",(function(){return fe})),n.d(t,"Z",(function(){return me})),n.d(t,"A",(function(){return Se})),n.d(t,"B",(function(){return he})),n.d(t,"Fb",(function(){return ye})),n.d(t,"hb",(function(){return Oe.a})),n.d(t,"t",(function(){return Ee}));var r=n(254);const a=e=>{const t=(e=>e.get("backendSessionJsonRpc"))(e);return"loaded"===t.status?t.muxSessionManager:null};var s=n(209),o=n(128),c=n(85),i=n(214),u=n(55),d=n(8);var l=n(25),p=n(53),g=n(139);const b=e=>e.getIn(["location","language"]),f=e=>e.getIn(["location","current"]),m=e=>Number(e.getIn(["location","current","query","ex"],1)),S=e=>e.getIn(["location","current","query"])||Object(d.Map)(),h=e=>e.getIn(["location","before","query"])||Object(d.Map)(),y=e=>S(e).get("noFocus"),O=Object(l.createSelector)(f,m,g.a,(e,t,n)=>{const{chapterRef:r,courseRef:a}=Object(p.d)(e.get("pathname",""));return{courseRef:a,chapterRef:r,exerciseNumber:t,learningMode:n}}),E=Object(l.createSelector)(c.b,c.a,u.i,O,S,b,p.a),_=e=>Boolean(e.getIn(["mobilePopup","linkSending"])),I=e=>Boolean(e.getIn(["mobilePopup","linkSent"])),T=e=>Boolean(e.getIn(["mobilePopup","linkFailed"])),v=e=>Boolean(Object(c.b)(e).get("mobile_enabled"));var x=n(73),w=n(47);const R=e=>e.get("onboardingMilestones"),C=Object(l.createSelector)(w.e,w.q,R,u.q,g.a,(e,t,n,r,a)=>e&&!t.get("has_seen_campus_tour")&&"singleExercise"!==a&&n.isActive&&r!==x.a.exercises.VIDEO_EXERCISE&&n.step<4),A=e=>e.get("output").output;var j=n(153),P=n(190),N=n(164),D=n.n(N),k=n(356),M=n.n(k),U=n(503),L=n.n(U),F=n(10),H=n(34);const B=Object(l.createSelector)(u.m,o.a,c.b,c.o,(e,t,n,r)=>[e.get("title")||t.get("title")||n.get("title"),r||M()(n.get("programming_language"))].filter(D.a).join(" | ")),G=Object(l.createSelector)(u.m,o.a,c.b,(e,t,n)=>{const r=r=>e.get(r)||t.get(r)||n.get(r);return`Here is an example of ${L()(r("title"))}: ${L()(r("assignment")).split(".")[0]}.`}),K=Object(l.createSelector)(u.m,u.K,u.p,u.l,(e,t,n,r)=>t.map(t=>t.has("props")&&!t.get("props").has("resetCode")?t.setIn(["props","resetCode"],e.get("sample_code")):t).map(t=>{if(!t.has("props"))return t;const a=r.isEmpty()?n.get("last_attempt"):r.get("last_attempt"),s=!0===n.get("used_solution")&&a===e.get("solution")?e.get("sample_code"):a||e.get("sample_code");return t.updateIn(["props","code"],e=>null!==e?e:s)})),W=function(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.a;if("fr"===a)return!1;const s=e.get("id"),o=e.get("lti_only"),c=e.get("should_cache",!0),i=null!=e.get("archived_at"),u=752===s,d=F.a.isProductionDomain(),l=null!==(n=null===(r=t[e.get("id")])||void 0===r?void 0:r.includes(a))&&void 0!==n&&n,p=(null!==a&&void 0!==a?a:H.a)===H.a;return!o&&c&&!i&&!u&&d&&(p||l)},X=Object(l.createSelector)(B,G,e=>e.getIn(["location","canonical"],null),c.b,g.a,b,e=>{var t;return null!==(t=e.getIn(["preFetchedData","translatedCourses","data"]))&&void 0!==t?t:{}},(e,t,n,r,a,s,o)=>({title:e,description:t,canonical:n,shouldBeIndexed:W(r,o,s),isSingleExerciseMode:"singleExercise"===a})),q=e=>e.get("systemStatus",Object(d.Map)()),J=(e,t)=>e.get("contentAuthorization")[t]||null;var V=n(314),z=n.n(V),Y=n(729);const Q=e=>{const t=Object(c.p)(e),n=Object(o.c)(e),r=Object(u.n)(e);return a=t,null!=Object(Y.a)(a)&&1===n&&r<7&&!(()=>{const e=z.a.get("lx-dashboard-survey"),t=Date.now();return void 0!==e&&e>t-2592e6})();var a};var Z=n(376),$=n.n(Z),ee=n(68),te=n(298);const ne=e=>e.get("streakInfo").type===ee.a.Known,re=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return t.dailyXp},ae=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?t.lengthInDays:t.current.streak.days},se=e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&t.streakGoalMetInSession},oe=e=>{const t=e.get("streakInfo");return t.type===ee.a.Unknown||2!==t.version?0:t.freezesAwardedInSession},ce=e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&t.screenVisible},ie=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?te.a:t.streakGoal},ue=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?t.deadline:Date.parse(t.current.streak_deadline)},de=[{date:"2024-09-16",weekday:"Mon",status:"unmet"},{date:"2024-09-17",weekday:"Tue",status:"unmet"},{date:"2024-09-18",weekday:"Wed",status:"unmet"},{date:"2024-09-19",weekday:"Thu",status:"unmet"},{date:"2024-09-20",weekday:"Fri",status:"unmet"},{date:"2024-09-21",weekday:"Sat",status:"unmet"},{date:"2024-09-22",weekday:"Sun",status:"unmet"}],le=e=>{const t=e.get("streakInfo");if(t.type===ee.a.Unknown)return[];if(1===t.version){if(!(e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&(1===t.version?t.dailyXp>=te.a:t.current.streak_goal_met)})(e))return de;const t=((new Date).getDay()-1+7)%7,n=$()(de);return n[t].status="met",n}return t.current.streak_week_view},pe=e=>e.get("notes"),ge=Object(l.createSelector)(pe,e=>e.workspaceTemplate),be=Object(l.createSelector)(ge,e=>null!=e),fe=e=>e.get("codeExplanation"),me=Object(l.createSelector)(fe,e=>["initial","error"].includes(e.codeExplanation.type)),Se=Object(l.createSelector)(c.g,c.i,w.p,u.y,u.L,u.P,(e,t,n,r,a,s)=>({courseTitle:e,language:t,userLanguage:n,instructions:r,pec:a,solution:s})),he=Object(l.createSelector)(u.m,e=>({exerciseId:e.get("id"),_tag:"campusUserExplanation"})),ye=e=>e.get("learningRecap");var Oe=n(364);const Ee=e=>e.getIn(["preFetchedData","categoryPages","data"])||[]},209:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(25),a=n(10);const s={NONE:"NONE",BOOTING:"BOOTING",PRE_BOOTED:"PRE_BOOTED",BOOTED:"BOOTED"},o={COURSE_NOT_FOUND:"COURSE_NOT_FOUND",CHAPTER_NOT_FOUND:"CHAPTER_NOT_FOUND",LTI_NOT_ACTIVE:"LTI_NOT_ACTIVE",UNKNOWN_ROUTE:"UNKNOWN_ROUTE",UNKNOWN:"UNKNOWN"},c=e=>e.get("boot"),i=Object(r.createSelector)(c,e=>e.get("bootState")===s.BOOTED),u=Object(r.createSelector)(c,i,(e,t)=>t||e.get("bootState")===s.PRE_BOOTED),d=Object(r.createSelector)(c,u,i,(e,t,n)=>e.get("bootState")!==s.BOOTING&&(!n&&(!t||!a.a.isServerSideRendering)))},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(80);const a=e=>{let{course:t,exercise:n,images:a}=e;if(null==a)throw new Error("Images have not been fetched yet, should be done before starting session");const s=t.runtime_config;switch(a.type){case"notFound":return{image:void 0,runtimeConfig:s};case"singleImage":return{image:a.imageTag,runtimeConfig:s};case"multiImage":{if(null==n.exercise_image)return{image:a.imageNameToImageTag.default,runtimeConfig:s};const e=n.exercise_image;return{image:a.imageNameToImageTag[e],runtimeConfig:n.runtime_config}}default:return Object(r.a)(a)}}},214:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));const r=e=>e.get("datawarehouseSession"),a=e=>{const{status:t}=r(e);return"success"===t||"no-session"===t},s=e=>"loading"===r(e).status,o=e=>"error"===r(e).status},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return l}));var r=n(214);const a={BUSY:{code:"busy",text:"Session Busy"},BROKEN:{code:"broken",text:"Session Broken"},READY:{code:"ready",text:"Workspace Ready"},NONE:{code:"none",text:""}},s=e=>e.get("backendSession"),o=e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.status.code},c=e=>o(e)===a.READY.code&&Object(r.d)(e),i=e=>o(e)===a.BUSY.code||Object(r.c)(e),u=e=>o(e)===a.BROKEN.code||Object(r.b)(e),d=e=>{var t;return(null===(t=s(e))||void 0===t?void 0:t.isInitSession)||Object(r.c)(e)},l=e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.sessionId}},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(68);const s={type:a.a.Unknown},o=(e,t)=>t?{version:1,streakGoalMetInSession:!1,screenVisible:!1,type:a.a.Known,dailyXp:t.daily_xp,lengthInDays:t.streak.days,createdAt:t.streak.created_at,incrementedAt:t.streak.last_incremented_at,deadline:Date.parse(t.streak_deadline)}:e,c=250,i=(e,t)=>{const n=e.dailyXp>=c,r=t.xpGained>=c,a=n?e.lengthInDays:0;return r?((e,t,n)=>{const r=n+1===5;return{...e,incrementedAt:new Date(t.currentTime||Date.now()).toISOString(),dailyXp:r?t.xpGained+0:t.xpGained,lengthInDays:n+1,streakGoalMetInSession:!0,deadline:e.deadline+864e5}})(e,t,a):((e,t,n)=>({...e,streakGoalMetInSession:!1,dailyXp:t.xpGained,lengthInDays:n,deadline:e.deadline+864e5}))(e,t,a)},u=(e,t)=>{if(t.currentTime>e.deadline)return i(e,t);const n=e.dailyXp+t.xpGained,r=e.dailyXp<c&&n>=c,a=r?e.lengthInDays+1:e.lengthInDays,s=4===e.lengthInDays&&5===a,o=r?new Date(t.currentTime||Date.now()).toISOString():e.incrementedAt;return{...e,streakGoalMetInSession:e.streakGoalMetInSession||r,incrementedAt:o,dailyXp:s?n+0:n,lengthInDays:a}};function d(e){return{...e,screenVisible:!0}}function l(e){return e.screenVisible?{...e,screenVisible:!1,streakGoalMetInSession:!1}:e}t.b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(t.type===r.h)return o(e,t.entities.streakInfo);if(e.type===a.a.Unknown||1!==e.version)return e;switch(t.type){case r.Ob:return o(e,t.data);case r.G:return u(e,t);case r.Fb:return d(e);case r.M:return l(e);default:return e}}},299:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(8),a=n(4),s=n(2);const o=Object(r.Record)({status:s.g.NOT_FETCHED,data:null},"PreFetchedRequestRecord"),c=Object(r.Record)({chapter:new o({}),course:new o({}),exercises:new o({}),learningRecap:new o({}),sharedImage:new o({}),workspaceTemplate:new o({}),courseImages:new o({}),categoryPages:new o({}),translatedCourses:new o({})},"PreFetchedDataStateRecord"),i=new c({});t.c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.h:case a.g:return e.merge(Object(r.Map)(t.preFetchedData).filter((t,n)=>e.has(n)).map(e=>new o(e)));default:return e}}},344:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(314),a=n.n(r),s=n(10),o=n(2),c=n(4);const i=e=>{let{redirectUrl:t}=e;return e=>{const n=Date.now();a.a.set("lx-dashboard-survey",n),e(c.le({modal:{...o.e.DASHBOARD_SURVEY,redirectUrl:t}}))}},u=e=>{let{redirectUrl:t,shouldShowSurveyModalSelector:n=o.Sc,showDashboardSurveyActionCreator:r=i}=e;return(e,a)=>{const s=a();n(s)?e(r({redirectUrl:t})):window.location.href=t}},d=e=>{let{checks:t,redirectUrl:n,text:r}=e;return async(e,a)=>{const c=a(),i=Object(o.F)(c).get("id"),u=s.a.serviceUrls.campusApi+"/api/back-to-dashboard-survey/answer",d=JSON.stringify({answers:t,comment:r,course_id:i});try{await fetch(u,{body:d,credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"})}catch(l){}finally{window.location.href=n}}}},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return i}));const r="boot/BOOT",a="boot/BOOT_SUCCEEDED",s="boot/BOOT_FAILED",o=e=>{let{authorizationHeader:t,chapterRef:n=null,courseRef:a,isPreview:s,language:o,originalLocation:c,preFetchedData:i,queryParams:u}=e;return{type:r,courseRef:a,chapterRef:n,authorizationHeader:t,isPreview:s,queryParams:u,language:o,originalLocation:c,preFetchedData:i}},c=e=>async t=>{await t((e=>{let{canonical:t,chapterId:n,courseId:r,entities:s,exerciseNumber:o,language:c,learningRecap:i,pathname:u,preFetchedData:d,queryParams:l}=e;return{type:a,courseId:r,chapterId:n,exerciseNumber:o,entities:s,pathname:u,queryParams:l,language:c,learningRecap:i,canonical:t,preFetchedData:d}})(e))},i=e=>{let{error:t,originalError:n,preFetchedData:r}=e;return{type:s,error:t,originalError:n,preFetchedData:r}}},364:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>e.get("images")},365:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var r=n(35),a=n.n(r),s=n(258),o=n(80);let c=function(e){return e.denied="denied",e.granted="granted",e.loading="loading",e}({});const i="contentAuthorization/CONTENT_AUTHORIZATION_STATUS_UPDATED",u=(e,t)=>async n=>{n((e=>{let{chapterId:t,status:n}=e;return{type:i,chapterId:t,status:n}})({chapterId:e,status:c.loading}));const r=await t.authorize("chapter:"+e);switch(r.access){case s.a.GRANTED:case s.a.INDETERMINATE:switch(r.decisionSource){case"grant-with-error":(e=>{switch(e.type){case"invalid-access-value":a.a.captureMessage("CAS: invalid access value",{level:"warning",extra:{access:e.access}});break;case"unexpected-status":a.a.captureMessage("CAS: unexpected status",{level:"warning",extra:{status:e.status}});break;case"unhandled-error":a.a.captureMessage("CAS: unhandled error",{level:"warning",extra:{error:e.error}});break;default:Object(o.a)(e)}})(r.errorResult);break;case"circuit-breaker":case"policy":case"grant-fallback":break;default:Object(o.a)(r)}return n((e=>{let{chapterId:t,debug:n,status:r}=e;return{type:i,chapterId:t,status:r,debug:n}})({chapterId:e,status:c.granted,debug:r}));case s.a.DENIED:return n((e=>{let{chapterId:t,debug:n,reason:r,status:a}=e;return{type:i,chapterId:t,reason:r,status:a,debug:n}})({chapterId:e,status:c.denied,reason:r.denyReason,debug:r}));default:return Object(o.a)(r)}}},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),a=n(10),s=n(4),o=n(2);const c=Object(r.Record)({bootState:o.c.NONE,error:null},"BootStateRecord"),i=new c({});t.b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.h:return e.update("bootState",()=>t.entities.course.lti_only&&a.a.isServerSideRendering?o.c.NONE:a.a.isServerSideRendering?o.c.PRE_BOOTED:o.c.BOOTED);case s.g:return e.set("bootState",o.c.BOOTED).set("error",t.error);default:return e}}},4:function(e,t,n){"use strict";n.d(t,"ab",(function(){return r})),n.d(t,"Cd",(function(){return a})),n.d(t,"y",(function(){return s})),n.d(t,"Zc",(function(){return o})),n.d(t,"A",(function(){return c})),n.d(t,"s",(function(){return i})),n.d(t,"Sc",(function(){return u})),n.d(t,"r",(function(){return d})),n.d(t,"Rc",(function(){return l})),n.d(t,"w",(function(){return p})),n.d(t,"Wc",(function(){return g})),n.d(t,"Xb",(function(){return b})),n.d(t,"Ae",(function(){return f})),n.d(t,"E",(function(){return m})),n.d(t,"ed",(function(){return S})),n.d(t,"cb",(function(){return h})),n.d(t,"Ed",(function(){return y})),n.d(t,"yb",(function(){return O})),n.d(t,"ee",(function(){return E})),n.d(t,"wb",(function(){return _})),n.d(t,"ce",(function(){return I})),n.d(t,"x",(function(){return T})),n.d(t,"Yc",(function(){return v})),n.d(t,"pb",(function(){return x})),n.d(t,"Vd",(function(){return w})),n.d(t,"qb",(function(){return R})),n.d(t,"Wd",(function(){return C})),n.d(t,"rb",(function(){return A})),n.d(t,"Xd",(function(){return j})),n.d(t,"f",(function(){return P.a})),n.d(t,"h",(function(){return P.c})),n.d(t,"g",(function(){return P.b})),n.d(t,"Fc",(function(){return P.d})),n.d(t,"ue",(function(){return P.f})),n.d(t,"Gc",(function(){return P.e})),n.d(t,"Yb",(function(){return N})),n.d(t,"Be",(function(){return D})),n.d(t,"Db",(function(){return k})),n.d(t,"ie",(function(){return M})),n.d(t,"Zb",(function(){return U})),n.d(t,"bc",(function(){return L})),n.d(t,"De",(function(){return F})),n.d(t,"u",(function(){return H})),n.d(t,"Uc",(function(){return B})),n.d(t,"ec",(function(){return G})),n.d(t,"Ge",(function(){return K})),n.d(t,"O",(function(){return W})),n.d(t,"td",(function(){return X})),n.d(t,"fc",(function(){return J})),n.d(t,"Nb",(function(){return V})),n.d(t,"qe",(function(){return z})),n.d(t,"lb",(function(){return Y})),n.d(t,"Qd",(function(){return Q})),n.d(t,"cc",(function(){return Z})),n.d(t,"Ee",(function(){return $})),n.d(t,"F",(function(){return ee})),n.d(t,"fd",(function(){return te})),n.d(t,"I",(function(){return ne})),n.d(t,"ld",(function(){return re})),n.d(t,"Eb",(function(){return ae})),n.d(t,"je",(function(){return se})),n.d(t,"Jb",(function(){return oe})),n.d(t,"ne",(function(){return ce})),n.d(t,"S",(function(){return ie})),n.d(t,"ud",(function(){return ue})),n.d(t,"a",(function(){return de})),n.d(t,"Ac",(function(){return le})),n.d(t,"W",(function(){return pe})),n.d(t,"yd",(function(){return ge})),n.d(t,"X",(function(){return be})),n.d(t,"zd",(function(){return fe})),n.d(t,"U",(function(){return me})),n.d(t,"wd",(function(){return Se})),n.d(t,"T",(function(){return he})),n.d(t,"vd",(function(){return ye})),n.d(t,"V",(function(){return Oe})),n.d(t,"xd",(function(){return Ee})),n.d(t,"hb",(function(){return _e})),n.d(t,"Ld",(function(){return Ie})),n.d(t,"jb",(function(){return Te})),n.d(t,"Nd",(function(){return ve})),n.d(t,"n",(function(){return xe})),n.d(t,"Oc",(function(){return we})),n.d(t,"t",(function(){return Re})),n.d(t,"Tc",(function(){return Ce})),n.d(t,"m",(function(){return Ae})),n.d(t,"Nc",(function(){return je})),n.d(t,"G",(function(){return Pe})),n.d(t,"id",(function(){return Ne})),n.d(t,"L",(function(){return De})),n.d(t,"qd",(function(){return ke})),n.d(t,"mc",(function(){return Me})),n.d(t,"Ne",(function(){return Ue})),n.d(t,"hc",(function(){return Le})),n.d(t,"Ie",(function(){return Fe})),n.d(t,"kc",(function(){return He})),n.d(t,"Le",(function(){return Be})),n.d(t,"ic",(function(){return Ge})),n.d(t,"Je",(function(){return Ke})),n.d(t,"jc",(function(){return We})),n.d(t,"Ke",(function(){return Xe})),n.d(t,"lc",(function(){return qe})),n.d(t,"Me",(function(){return Je})),n.d(t,"Gb",(function(){return Ve})),n.d(t,"ke",(function(){return ze})),n.d(t,"sb",(function(){return Ye})),n.d(t,"Yd",(function(){return Qe})),n.d(t,"Kb",(function(){return Ze})),n.d(t,"oe",(function(){return $e})),n.d(t,"ac",(function(){return et})),n.d(t,"Ce",(function(){return tt})),n.d(t,"i",(function(){return nt})),n.d(t,"Ic",(function(){return rt})),n.d(t,"ub",(function(){return at})),n.d(t,"ae",(function(){return st})),n.d(t,"dc",(function(){return ot})),n.d(t,"Fe",(function(){return ct})),n.d(t,"H",(function(){return it})),n.d(t,"jd",(function(){return ut})),n.d(t,"K",(function(){return dt})),n.d(t,"nd",(function(){return lt})),n.d(t,"e",(function(){return pt})),n.d(t,"Ec",(function(){return gt})),n.d(t,"k",(function(){return bt})),n.d(t,"Lc",(function(){return ft})),n.d(t,"Vb",(function(){return mt})),n.d(t,"ye",(function(){return St})),n.d(t,"b",(function(){return ht})),n.d(t,"Bc",(function(){return yt})),n.d(t,"Ub",(function(){return Ot})),n.d(t,"xe",(function(){return Et})),n.d(t,"oc",(function(){return _t})),n.d(t,"Pe",(function(){return It})),n.d(t,"tb",(function(){return Tt})),n.d(t,"Zd",(function(){return vt})),n.d(t,"kb",(function(){return xt})),n.d(t,"Od",(function(){return wt})),n.d(t,"B",(function(){return Rt})),n.d(t,"bd",(function(){return Ct})),n.d(t,"z",(function(){return At})),n.d(t,"ad",(function(){return jt})),n.d(t,"Xc",(function(){return Pt})),n.d(t,"zb",(function(){return Nt})),n.d(t,"fe",(function(){return Dt})),n.d(t,"mb",(function(){return kt})),n.d(t,"Sd",(function(){return Mt})),n.d(t,"vc",(function(){return Ut})),n.d(t,"Ve",(function(){return Lt})),n.d(t,"uc",(function(){return Ft})),n.d(t,"Ue",(function(){return Ht})),n.d(t,"wc",(function(){return Bt})),n.d(t,"We",(function(){return Gt})),n.d(t,"rc",(function(){return Kt})),n.d(t,"Re",(function(){return Wt})),n.d(t,"tc",(function(){return Xt})),n.d(t,"Te",(function(){return qt})),n.d(t,"sc",(function(){return Jt})),n.d(t,"Se",(function(){return Vt})),n.d(t,"Sb",(function(){return zt})),n.d(t,"ve",(function(){return Yt})),n.d(t,"xc",(function(){return Qt})),n.d(t,"Xe",(function(){return Zt})),n.d(t,"p",(function(){return $t})),n.d(t,"Pc",(function(){return en})),n.d(t,"Wb",(function(){return tn})),n.d(t,"ze",(function(){return nn})),n.d(t,"j",(function(){return rn})),n.d(t,"Kc",(function(){return an})),n.d(t,"Z",(function(){return sn})),n.d(t,"Bd",(function(){return on})),n.d(t,"xb",(function(){return cn})),n.d(t,"de",(function(){return un})),n.d(t,"Bb",(function(){return dn})),n.d(t,"he",(function(){return ln})),n.d(t,"Ab",(function(){return pn})),n.d(t,"ge",(function(){return gn})),n.d(t,"nc",(function(){return bn})),n.d(t,"Oe",(function(){return fn})),n.d(t,"gd",(function(){return mn})),n.d(t,"pc",(function(){return Sn})),n.d(t,"Qe",(function(){return hn})),n.d(t,"db",(function(){return yn})),n.d(t,"Hd",(function(){return On})),n.d(t,"d",(function(){return En})),n.d(t,"Dc",(function(){return _n})),n.d(t,"Ud",(function(){return In})),n.d(t,"Jc",(function(){return Tn})),n.d(t,"eb",(function(){return vn})),n.d(t,"Id",(function(){return xn})),n.d(t,"Ib",(function(){return wn})),n.d(t,"me",(function(){return Rn})),n.d(t,"Hb",(function(){return Cn})),n.d(t,"le",(function(){return An})),n.d(t,"qc",(function(){return jn})),n.d(t,"D",(function(){return Pn})),n.d(t,"dd",(function(){return Nn})),n.d(t,"C",(function(){return Dn})),n.d(t,"cd",(function(){return kn})),n.d(t,"J",(function(){return Mn})),n.d(t,"md",(function(){return Un})),n.d(t,"N",(function(){return Ln})),n.d(t,"sd",(function(){return Fn})),n.d(t,"l",(function(){return Hn})),n.d(t,"Mc",(function(){return Bn})),n.d(t,"ib",(function(){return Gn})),n.d(t,"Md",(function(){return Kn})),n.d(t,"Pd",(function(){return Wn})),n.d(t,"Tb",(function(){return Xn})),n.d(t,"we",(function(){return qn})),n.d(t,"vb",(function(){return Jn})),n.d(t,"be",(function(){return Vn})),n.d(t,"yc",(function(){return zn})),n.d(t,"Ye",(function(){return Yn})),n.d(t,"Rb",(function(){return Qn})),n.d(t,"te",(function(){return Zn})),n.d(t,"gb",(function(){return $n})),n.d(t,"Kd",(function(){return er})),n.d(t,"zc",(function(){return tr})),n.d(t,"Ze",(function(){return nr})),n.d(t,"Qb",(function(){return rr})),n.d(t,"se",(function(){return ar})),n.d(t,"gc",(function(){return sr})),n.d(t,"He",(function(){return or})),n.d(t,"Y",(function(){return cr})),n.d(t,"Ad",(function(){return ir})),n.d(t,"v",(function(){return ur})),n.d(t,"Vc",(function(){return dr})),n.d(t,"Lb",(function(){return lr})),n.d(t,"pe",(function(){return pr})),n.d(t,"fb",(function(){return gr})),n.d(t,"Jd",(function(){return br})),n.d(t,"R",(function(){return Sr})),n.d(t,"P",(function(){return hr})),n.d(t,"Q",(function(){return yr})),n.d(t,"Rd",(function(){return Or})),n.d(t,"c",(function(){return Er})),n.d(t,"Cc",(function(){return _r})),n.d(t,"Mb",(function(){return Ir})),n.d(t,"bb",(function(){return Tr})),n.d(t,"Fd",(function(){return vr})),n.d(t,"q",(function(){return xr.b})),n.d(t,"o",(function(){return xr.a})),n.d(t,"kd",(function(){return xr.c})),n.d(t,"pd",(function(){return wr.a})),n.d(t,"Cb",(function(){return Cr})),n.d(t,"od",(function(){return Pr})),n.d(t,"hd",(function(){return kr})),n.d(t,"nb",(function(){return Ur})),n.d(t,"Td",(function(){return Lr})),n.d(t,"ob",(function(){return Fr})),n.d(t,"Pb",(function(){return Br})),n.d(t,"re",(function(){return Gr})),n.d(t,"Ob",(function(){return qr})),n.d(t,"Gd",(function(){return Vr})),n.d(t,"Fb",(function(){return zr})),n.d(t,"M",(function(){return Yr})),n.d(t,"rd",(function(){return Qr})),n.d(t,"Hc",(function(){return Zr})),n.d(t,"Dd",(function(){return $r})),n.d(t,"Qc",(function(){return ea}));const r="backendSession/NO_SESSION",a=()=>({type:r}),s="backendSession/EPIC_START_SESSION",o=e=>{let{force_new:t=!1,id:n,language:r,timestamp:a=Date.now(),...o}=e;return{type:s,timestamp:a,language:r,id:n,force_new:t,initCommandOptions:o}},c="backendSession/EPIC_SUBMIT_CODE",i="backendSession/EPIC_CLEAR_BACKEND_CLIENT_SETTINGS",u=()=>({type:i}),d="backendSession/EPIC_BACKEND_ERROR",l=e=>({type:d,output:e}),p="backendSession/EPIC_MUX_REGISTERED",g=()=>({type:p}),b="backendSession/UPDATE_BACKEND_STATUS",f=e=>{let{message:t,status:n,statusCode:r}=e;return{type:b,status:n,statusCode:r,message:t}},m="backendSession/EPIC_UPDATE_BACKEND_STATUS",S=e=>{let{error:t,message:n,status:r,statusCode:a,timestamp:s=Date.now()}=e;return{type:m,status:r,statusCode:a,timestamp:s,message:n,error:t}},h="backendSession/ON_CODE_SUBMITTED",y=e=>{let{language:t,timestamp:n}=e;return{type:h,timestamp:n,language:t}},O="backendSession/SET_SESSION_ID",E=e=>({...e,type:O}),_="SET_MUX_SESSION_MANAGER",I=e=>({muxSessionManager:e,type:_}),T="EPIC_START_DATAWAREHOUSE_SESSION",v=e=>{let{courseId:t}=e;return{courseId:t,type:T}},x="SET_DATAWAREHOUSE_SESSION",w=e=>{let{courseId:t,session:n}=e;return{courseId:t,session:n,type:x}},R="SET_DATAWAREHOUSE_SESSION_ERROR",C=e=>{let{courseId:t,error:n}=e;return{courseId:t,type:R,error:n}},A="SET_DATAWAREHOUSE_SESSION_LOADING",j=e=>{let{courseId:t}=e;return{courseId:t,type:A}};var P=n(355);const N="chapter/UPDATE_CHAPTER",D=e=>{let{chapterRef:t,chapters:n}=e;return{type:N,chapterRef:t,chapters:n}},k="chapter/SHOULD_SHOW_WINDOW",M=e=>{let{isCourseEndReached:t,meta:n,type:r,url:a}=e;return{type:k,windowType:r,url:a,meta:n,isCourseEndReached:t}},U="course/UPDATE_CHAPTER_PROGRESS",L="course/UPDATE_COURSE_PROGRESS",F=e=>{let{data:t}=e;return{type:L,data:t}},H="course/EPIC_GET_EXERCISES_FROM_CHAPTER",B=e=>{let{chapterRef:t,courseRef:n}=e;return{type:H,chapterRef:t,courseRef:n}},G="course/UPDATE_EXERCISES_IN_CHAPTER",K=e=>{let{chapterRef:t,exercises:n,progress:r={}}=e;return{type:G,chapterRef:t,exercises:n,progress:r}},W="course/MID_RESET_COURSE_PROGRESS",X=e=>{let{courseId:t,redirection:n}=e;return{type:W,redirection:n,courseId:t}};var q=n(189);const J="exercises/UPDATE_EXERCISES_PROGRESS",V="exercises/STOP_BACKEND_SESSION",z=()=>({type:V}),Y="exercises/SAVE_CODE",Q=e=>{let{category:t,code:n,extra:r={},id:a,tabKey:s}=e;return{type:Y,id:a,code:n,tabKey:s,category:t,extra:r}},Z="exercises/UPDATE_CURRENT_EXERCISE",$=e=>{let{index:t}=e;return e=>e({type:Z,index:t})},ee="exercises/EPIC_UPDATE_EXERCISES",te=e=>{let{chapterRef:t,chapters:n,courseRef:r,exIndex:a,injection:s}=e;return{type:ee,chapterRef:t,courseRef:r,exIndex:a,chapters:n,injection:s}},ne="exercises/FIGURE_EXPANDED",re=e=>{let{category:t,index:n,src:r,tabKey:a}=e;return{type:ne,category:t,tabKey:a,index:n,src:r}},ae="exercises/SHOW_BOKEH",se=e=>{let{html:t,src:n}=e;return{type:ae,src:n,html:t}},oe="exercises/SHOW_R_DOC",ce=e=>{let{payload:t}=e;return{type:oe,payload:t}},ie="exercises/NEW_HTML",ue=e=>{let{html:t,isRelativeToMultiplexer:n,src:r}=e;return{type:ie,src:r,html:t,isRelativeToMultiplexer:n}},de="exercises/ADD_PROXY",le=e=>{let{proxyId:t}=e;return{type:de,proxyId:t}},pe="exercises/NEW_PROXY",ge=e=>{let{payload:t}=e;return{type:pe,payload:t}},be="exercises/NEW_SHELL_PROXY",fe=e=>{let{payload:t}=e;return{type:be,payload:t}},me="exercises/NEW_PDF_DEPRECATED",Se=e=>{let{src:t}=e;return{type:me,src:t}},he="exercises/NEW_PDF",ye=e=>{let{isRelativeToMultiplexer:t,src:n}=e;return{type:he,src:n,isRelativeToMultiplexer:t}},Oe="exercises/NEW_PLOT",Ee=e=>{let{url:t}=e;return{type:Oe,url:t}},_e="exercises/RERENDER_PLOT",Ie=e=>{let{index:t,url:n}=e;return{type:_e,index:t,url:n}},Te="exercises/RESULT_EXERCISE",ve=e=>{let{results:t,timestamp:n=Date.now()}=e;return{type:Te,results:t,timestamp:n}},xe="exercises/COMPLETE_SUB_EXERCISE",we=e=>{let{completed:t,isLastExercise:n=!1,message:r,show:a,submitSettings:s={}}=e;return{type:xe,message:r,show:a,completed:t,submitSettings:s,isLastExercise:n}},Re="exercises/EPIC_COMPLETING_SUB_EXERCISE",Ce=e=>{let{completed:t,message:n,show:r,submitSettings:a={}}=e;return{type:Re,message:n,show:r,completed:t,submitSettings:a}},Ae="exercises/COMPLETE_EXERCISE",je=e=>{let{completed:t,message:n,show:r,submitSettings:a={}}=e;return(e,s)=>{const o=s().toJS();e({type:Ae,message:n,show:r,completed:t,submitSettings:a});const c=s().toJS();return Object(q.a)(o,c),ea}},Pe="exercises/EXERCISE_COMPLETED",Ne=e=>{let{currentTime:t,xpGained:n}=e;return{type:Pe,xpGained:n,currentTime:t}},De="exercises/HIDE_COMPLETED_EXERCISE",ke=e=>{let{id:t}=e;return{type:De,id:t}},Me="exercises/UPDATE_HIGHLIGHT",Ue=e=>{let{id:t,output:n}=e;return{type:Me,output:n,id:t}},Le="exercises/UPDATE_FEEDBACK_MESSAGE",Fe=e=>{let{output:t}=e;return{type:Le,output:t}},He="exercises/UPDATE_FEEDBACK_MESSAGE_WITH_ASSISTANT",Be=e=>{let{error:t}=e;return{type:He,error:t}},Ge="exercises/UPDATE_FEEDBACK_MESSAGE_OF_SUB_EX",Ke=e=>{let{output:t}=e;return{type:Ge,output:t}},We="exercises/UPDATE_FEEDBACK_MESSAGE_OF_SUB_EX_WITH_ASSISTANT",Xe=e=>{let{error:t}=e;return{type:We,error:t}},qe="exercises/UPDATE_FEEDBACK_TAB",Je=e=>{let{tabIndex:t}=e;return{type:qe,tabIndex:t}},Ve="exercises/SHOW_HINT",ze=(e,t)=>({type:Ve,exerciseId:e,xp:t}),Ye="exercises/SET_HINT_SHOWN",Qe=e=>({type:Ye,isHintShown:e}),Ze="exercises/SHOW_SOLUTION",$e=(e,t,n)=>({type:Ze,exerciseId:t,xp:n,language:e}),et="exercises/UPDATE_CONSOLE_CODE",tt=e=>{let{output:t}=e;return{type:et,output:t}},nt="exercises/CHOOSE_ANSWER",rt=e=>{let{choice:t,index:n}=e;return{type:nt,choice:t,index:n}},at="exercises/SET_MCE_CHOICES_FOCUS",st=e=>{let{focused:t}=e;return{type:at,focused:t}},ot="exercises/UPDATE_CURRENT_GRAPHICAL_OUTPUT",ct=e=>{let{category:t,index:n,key:r}=e;return{type:ot,key:r,index:n,category:t}},it="exercises/EXPAND_GRAPHICAL_OUTPUT",ut=e=>{let{category:t,id:n,key:r}=e;return{type:it,key:r,category:t,id:n}},dt="exercises/FOCUS_GRAPHICAL_OUTPUT",lt=e=>{let{category:t,id:n,key:r}=e;return{type:dt,key:r,category:t,id:n}},pt="exercises/BLUR_GRAPHICAL_OUTPUT",gt=e=>{let{category:t,id:n,key:r}=e;return{type:pt,key:r,category:t,id:n}},bt="exercises/CLOSE_GRAPHICAL_OUTPUT",ft=e=>{let{category:t,id:n,key:r}=e;return{type:bt,key:r,category:t,id:n}},mt="exercises/UPDATE_ACTIVE_TAB",St=e=>{let{activeKey:t,category:n}=e;return{type:mt,category:n,activeKey:t}},ht="exercises/ADD_TAB",yt=e=>{let{category:t,key:n,title:r}=e;return{type:ht,category:t,key:n,title:r}},Ot="exercises/UPDATE_ACTIVE_INSTRUCTION_TAB",Et=e=>{let{activeKey:t}=e;return{type:Ot,activeKey:t}},_t="exercises/UPDATE_MARKDOWN_ACTIVE_TITLE",It=e=>{let{activeTitle:t}=e;return{type:_t,activeTitle:t}},Tt="exercises/SET_LTI_STATUS",vt=e=>{let{message:t,status:n}=e;return{type:Tt,status:n,message:t}},xt="exercises/RETRY_REQUEST_TO_LTI",wt=()=>({type:xt}),Rt="exercises/EPIC_SUBMIT_EXERCISE_RATING",Ct=e=>{let{extraInfo:t,nextPath:n,rating:r}=e;return{type:Rt,rating:r,extraInfo:t,nextPath:n}},At="exercises/EPIC_SUBMIT_CHAPTER_RATING",jt=e=>{let{extraInfo:t,onFinish:n,rating:r}=e;return{type:At,rating:r,onFinish:n,extraInfo:t}},Pt=()=>({type:"exercises/EPIC_RESET_CODE"}),Nt="exercises/SET_SIDE_PANEL_CLOSED_STATE",Dt=e=>({type:Nt,closed:e}),kt="exercises/SET_BOTTOM_PANEL_CLOSED_STATE",Mt=e=>({type:kt,closed:e}),Ut="exercises/UPDATE_SQL_QUERY_RESULT",Lt=e=>({type:Ut,settings:e}),Ft="exercises/UPDATE_SQL_QUERY_MESSAGE",Ht=e=>({type:Ft,settings:e}),Bt="exercises/UPDATE_SQL_TABLE",Gt=e=>({type:Bt,settings:e}),Kt="exercises/UPDATE_OBJECT_VIEW",Wt=e=>({type:Kt,settings:e}),Xt="exercises/UPDATE_SQL_OPTIONS",qt=e=>({type:Xt,settings:e}),Jt="exercises/UPDATE_SQL_ERROR",Vt=e=>({type:Jt,settings:e}),zt="exercises/TOGGLE_SQL_ERROR",Yt=e=>({type:zt,show:e}),Qt="exercises/UPDATE_SQL_TABLE_NAMES",Zt=e=>({type:Qt,tableNames:e}),$t="exercises/COPY_SOLUTION",en=e=>{let{code:t}=e;return{type:$t,code:t}},tn="exercises/UPDATE_ATTEMPTS",nn=e=>{let{nbAttempts:t}=e;return{type:tn,nbAttempts:t}},rn="exercises/CLOSE_EDITOR_TAB",an=e=>{let{tabKey:t}=e;return{type:rn,tabKey:t}},sn="exercises/NEXT_INTERNAL_EXERCISE",on=()=>({type:sn}),cn="exercises/SET_NEXT_PATH",un=e=>({type:cn,nextPath:e}),dn="exercises/SET_USER_USED_AI_INCORRECT_SUBMISSIONS",ln=e=>({type:dn,value:e}),pn="exercises/SET_USER_USED_AI_ERROR_EXPLANATION",gn=e=>({type:pn,value:e}),bn="location/UPDATE_LOCATION",fn=e=>{let{pathname:t,query:n}=e;return{type:bn,pathname:t,query:n}},mn=()=>({type:"location/EPIC_UPDATE_META_TAGS"}),Sn="location/UPDATE_MID_LOCATION",hn=e=>{let{pathname:t,query:n}=e;return{type:Sn,pathname:t,query:n}},yn="output/REGISTER_CONSOLE_OUTPUT_CALLBACK",On=e=>({type:yn,callback:e}),En="output/APPEND_CONSOLE_LOG",_n=e=>({type:En,log:e}),In=e=>({type:"output/SET_CONSOLE_OUTPUT",output:e}),Tn=()=>({type:"output/CLEAR_CONSOLE_OUTPUT"}),vn="settings/REMOVE_MODAL",xn=function(){let{force:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:vn,force:e}},wn="settings/SHOW_PAYWALL_MODAL",Rn=()=>({type:wn}),Cn="settings/SHOW_MODAL",An=e=>{let{modal:t}=e;return{type:Cn,modal:t}},jn="settings/UPDATE_MODAL_SETTINGS",Pn="settings/EPIC_SUBMIT_ISSUE",Nn=e=>{let{category:t,userFeedback:n}=e;return{type:Pn,userFeedback:n,category:t}},Dn="settings/EPIC_SUBMIT_FEEDBACK",kn=e=>{let{rating:t,userFeedback:n}=e;return{type:Dn,userFeedback:n,rating:t}},Mn="settings/FIRST_TIME_COMPLETED_CHAPTERS",Un=()=>({type:Mn}),Ln="settings/INCREMENT_SHORTCUT_USAGE",Fn=()=>({type:Ln}),Hn="settings/CLOSE_SHORTCUT_FRAME",Bn=()=>({type:Hn}),Gn="settings/RESIZE_EDITORS",Kn=e=>{let{components:t,console:n,dimensions:r}=e;return{type:Gn,components:t,dimensions:r,console:n}},Wn=()=>({type:"settings/RUN_CODE_USAGE"}),Xn="settings/TOGGLE_UI_THEME",qn=()=>({type:Xn}),Jn="settings/SET_MOBILE_VIEW",Vn=e=>({type:Jn,selectedView:e}),zn="systemStatus/UPDATE_SYSTEM_STATUS",Yn=e=>({type:zn,status:e}),Qn="user/SUBMIT_TO_MAIN_APP",Zn=e=>{let{code:t,correct:n,lti:r,message:a,xp:s}=e;return{type:Qn,correct:n,message:a,code:t,lti:r,xp:s}},$n="user/REPORT_OUTPUT_TO_HEAP",er=e=>({type:$n,output:e}),tr="user/settings/USER_ENABLED_FOR_AI_FEATURES_FETCHED",nr=e=>({type:tr,aiFlags:e}),rr="externalExercise/SUBMIT_EXTERNAL_EXERCISE",ar=e=>{let{code:t,correct:n,exerciseType:r,message:a,xp:s}=e;return{type:rr,message:a,code:t,correct:n,exerciseType:r,xp:s}},sr="externalExercise/UPDATE_EXTERNAL_EXERCISE_XP",or=e=>{let{currentXp:t}=e;return{type:sr,currentXp:t}},cr="externalExercise/NEXT_EXTERNAL_EXERCISE",ir=()=>({type:cr}),ur="window/EPIC_GOT_WINDOW_RESPONSE",dr=()=>({type:ur}),lr="window/SHOW_WINDOW",pr=e=>{let{show:t}=e;return{type:lr,show:t}},gr="window/REMOVE_WINDOW",br=()=>({type:gr});var fr=n(76),mr=n(2);const Sr="mobilePopup/MOBILE_POPUP_LINK_SENT",hr="mobilePopup/MOBILE_POPUP_LINK_FAILED",yr="mobilePopup/MOBILE_POPUP_LINK_SENDING",Or=()=>(e,t)=>{e({type:yr});const n=t(),r=mr.F(n).get("id"),a=mr.v(n),s=mr.S(n).get("id");return fr.e.sendMobilePopupLink({courseId:r,chapterId:a,exerciseId:s}).then(()=>e({type:Sr})).catch(()=>e({type:hr}))},Er="onboardingMilestones/ADVANCE_ONBOARDING_MILESTONES",_r=()=>({type:Er}),Ir="onboardingMilestones/SKIP_ONBOARDING_MILESTONES",Tr="onboardingMilestones/ONBOARDING_MILESTONES_STARTED",vr=()=>({type:Tr});var xr=n(365),wr=n(344),Rr=n(80);const Cr="SET_WORKSPACE_NOTES",Ar=e=>{let{data:t}=e;return{type:Cr,data:t}},jr=e=>{let{workspaceTemplate:t}=e;switch(t._tag){case"course":return{_tag:"course",courseId:t.courseId};case"template":return{_tag:"template",templateKey:t.key};default:return Object(Rr.a)(t)}},Pr=e=>{let{courseSlug:t,workspaceTemplate:n}=e;return async e=>{e(Ar({data:{type:"loading"}}));try{const r=(await fr.a.getOwnedWorkspaceBySource({source:jr({workspaceTemplate:n}),courseSlug:t})).body;e(Ar({data:{type:"success",workspace:r}}))}catch(r){e(Ar({data:{type:"error"}}))}}};var Nr=n(190),Dr=n(47);const kr=e=>(t,n)=>{const r=n();Object(Dr.f)(r)?t(An({modal:Nr.b.LOGIN})):t((e=>{let{height:t,timestamp:n=Date.now(),width:r,...a}=e;return{type:c,settings:a,timestamp:n,width:r,height:t}})(e))};var Mr=n(196);const Ur="SET_CODE_EXPLANATION",Lr=e=>{let{data:t}=e;return{type:Ur,data:t}},Fr="SET_CODE_EXPLANATION_TYPE",Hr=e=>{let{codeExplanationType:t}=e;return{type:Fr,codeExplanationType:t}},Br="STREAM_CODE_EXPLANATION",Gr=e=>{let{input:t,modelTag:n,trigger:r}=e;return async(e,a)=>{e(Hr({codeExplanationType:"loading"}));const s=new TextDecoder("utf-8");try{const o=await Object(Mr.a)({body:{input:t,trigger:r,shouldStream:!0,useCache:!0,simulateStreamDelay:30},params:{modelTag:n}});if(o.ok&&o.body){const t=o.body.getReader();let n=!1;t.read().then((function r(o){let{done:c,value:i}=o;if("initial"!==a().get("codeExplanation").codeExplanation.type)if(c)n||e(Hr({codeExplanationType:"success"}));else{if(i){s.decode(i).split("\n").forEach(async t=>{if(""!==t.trim())try{const r=JSON.parse(t);switch(r.type){case"gpt-error":e(Kr),n=!0;break;case"gpt-id":e(Lr({data:{type:"streaming",prediction:{id:r.id,completion:""}}}));break;case"gpt-partial-answer":e((e=>{let{partialCompletion:t}=e;return{type:Br,partialCompletion:t}})({partialCompletion:r.choices[0].text}));break;default:Object(Rr.a)(r)}}catch(r){e(Kr),n=!0}})}t.read().then(r)}}))}else e(Kr)}catch(o){e(Kr)}}},Kr=Lr({data:{type:"error"}});var Wr=n(30),Xr=n(38);const qr="streaks/INFO_UPDATED",Jr=e=>({type:qr,data:e}),Vr=()=>(e,t)=>{const n=t();if(!Object(mr.xc)(n))return e(Jr());const r=Object(mr.vc)(n);return!r||Date.now()<r?e(Jr()):Object(Xr.d)().execute(Wr.c.endpoint.getStreak()).toPromise().then(t=>{let{body:n}=t;return e(Jr(n))}).catch(t=>(console.warn("Error refreshing streak state, delaying until next attempt",t),e(Jr())))},zr="streaks/SHOW_DAILY_STREAK_SCREEN",Yr="streaks/HIDE_DAILY_STREAK_SCREEN",Qr=()=>({type:Yr}),Zr=()=>(e,t)=>{const n=t(),r=mr.eb(n),a=mr.xc(n),s=mr.sc(n);a&&s&&r&&e({type:zr})},$r={type:"noop"},ea={}},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return At}));var r=n(8),a=n(149),s=n.n(a),o=n(86),c=n.n(o),i=n(228),u=n(827),d=n(193),l=n(524),p=n(10),g=n(828),b=n(829),f=n(4),m=n(2);const S={status:m.a.NONE,lastSubmittedCode:void 0,lastSubmittedCommand:void 0,isInitSession:!1,message:null,sessionId:void 0},h=(e,t,n)=>{const r=e.status.code===m.a.NONE.code&&t.code===m.a.BUSY.code;return{...e,isInitSession:r,status:{...t,statusCode:n}}},y=e=>{switch(e){case"broken":return m.a.BROKEN;case"busy":return m.a.BUSY;case"none":return m.a.NONE;case"ready":return m.a.READY;default:return Object(b.a)(e,m.a.NONE)}};const O={status:"initial"};var E=n(377),_=n(122),I=n.n(_);const T=(e,t)=>e.chapterRef===t.get("slug")||Number(e.chapterRef)===Number(t.get("id"));const v={codeExplanation:{type:"initial"}};const x={};var w=n(37),R=n.n(w);const C=(e,t)=>e.findIndex(e=>t===e.get("slug")||Number(t)===Number(e.get("id"))),A=Object(r.Map)();const j={status:"initial"};var P=n(31),N=n.n(P),D=n(48),k=n.n(D),M=n(129),U=n(84),L=n.n(U),F=n(33),H=n.n(F),B=n(183),G=n.n(B),K=n(186),W=n.n(K),X=n(75),q=n(1906),J=n(504);const V=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.get("lastRunCode"),s={key:Object(q.a)(),isActive:!0,messageType:m.f.INCORRECT,title:Object(X.c)("IncorrectFeedbackMessage.title"),ratedFeedback:!1,body:Object(J.a)(t.output.payload.message),lastRunCode:a,...n};return e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.map(e=>({...e,isActive:!1})).push(s)}))},z=(e,t)=>{const n=e.get("lastRunCode"),a={key:Object(q.a)(),error:t,isActive:!0,messageType:m.f.ASSISTANT,title:Object(X.c)("AssistantFeedbackMessage.title"),ratedFeedback:!1,body:Object(X.c)("AssistantFeedbackMessage.body"),lastRunCode:n};return e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.filter(e=>e.messageType!==m.f.ASSISTANT).map(e=>({...e,isActive:!1})).push(a)}))},Y=(e,t)=>{const n={output:{payload:{message:`<pre><code>${t}</code></pre>`}}},r={title:Object(X.c)("SolutionFeedbackMessage.title"),messageType:m.f.SOLUTION};return V(e,n,r)},Q=(e,t)=>e.update("feedbackMessages",e=>e.map((e,n)=>({...e,isActive:t.tabIndex===n}))),Z=(e,t)=>{const n=e.getIn(["completed","completed"]);return e.set("completed",Object(r.fromJS)({message:Object(J.a)(t.message),show:t.show,completed:t.completed,isFirstTime:!n&&t.completed}))},$=e=>e.update("feedbackMessages",e=>e.map(e=>e.isActive?{...e,ratedFeedback:!0}:e));var ee=n(113),te=n.n(ee),ne=n(378),re=n.n(ne),ae=n(165),se=n.n(ae),oe=n(379),ce=n.n(oe),ie=n(232),ue=n.n(ie),de=n(229),le=n.n(de);const pe=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"solution";const s=!c()(t.get("sample_code"),"[");if(s){const s=Object(U.getTabTitle)(a,n,t.get("type")),o="solution/"+s;return e.update("editorTabs",e=>e.map(e=>e.setIn(["props","active"],!1)).set(o,Object(r.fromJS)({title:s.replace("ReadOnly",""),isSolution:!0,props:{active:!0,extraClass:"animation--flash solution",extra:{}}})))}return e},ge=(e,t,n)=>e.update(e=>e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.map(e=>({...e,isActive:!1})).push({isActive:!0,title:Object(X.c)("HintFeedbackMessage.title"),ratedFeedback:!1,messageType:m.f.HINT})})).set("isHintShown",!0).set("sidePanelIsClosed",!1).update("currentXp",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.get("xp");return e-(n.xp||0)}))),be=(e,t,n,r)=>{switch(t.get("type")){case"MarkdownExercise":{let a=te()(()=>JSON.parse(t.get("solution")));return se()(a)?e:(a=ce()(ue()(a,(e,t)=>({title:t,isSolution:!0,props:{code:e,resetCode:e,uniqueId:le()("code-editor-"),active:re()(t,".Rmd")},extraClass:"animation--flash solution solution-markdown-title"})),(e,t)=>n+t),e.update("inputMarkdownTabs",e=>e.map(e=>e.set("active",!1)).mergeDeep(a)).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0)))}case"ConsoleExercise":return Y(e,t.get("solution","")).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0));default:return pe(e,t,r.language).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0))}},fe=e=>e.setIn(["user","currentXp"],e.get("subexercises").reduce((e,t)=>e+W()([t.get("xpWon"),t.get("progressXp"),0]),0));var me=(e,t)=>e&&e.get("subexercises")?((e,t)=>{if(!t||t.isEmpty())return e;if(e.get("subExProgressMerged"))return e;const n=Object(M.a)(e.get("type")),a=t.zipWith((e,t)=>({currentSubExProgress:e,previousSubExProgress:t}),t.unshift(null));let s=e.set("subExProgressMerged",!0).update("subexercises",e=>e.zipWith((e,t)=>{let{currentSubExProgress:a}=t;const s=a||Object(r.Map)();return e.setIn(["active"],!1).setIn(["unlocked"],s.get("completed")).setIn(["completed","completed"],s.get("completed")).setIn(["last_attempt"],s.get("last_attempt")).setIn(["used_solution"],s.get("used_solution")).setIn(["isSolutionShown"],s.get("used_solution")).setIn(["used_hint"],s.get("used_hint")).setIn(["isHintShown"],s.get("used_hint")).update(e=>e.get("isHintShown")?ge(e,e,{}):e).update(e=>e.get("isSolutionShown")&&n?Y(e,e.get("solution","")):e).setIn(["progressXp"],s.get("xp")).setIn(["xpToWin"],s.get("completed")?s.get("xp"):s.get("used_solution")?0:s.get("used_hint")?.7*e.get("xp")||0:e.get("xp"))},a));const o=e.get("language"),c=H()(L.a,o,{}),i="files/"+Object(U.getTabTitle)(c.editorPrefixTitle,o,e.get("type"));s=s.update("subexercises",e=>e.map(e=>{const t=e.get("solution"),n=e.get("sample_code"),r=e.get("used_solution"),a=e.get("last_attempt");return e.updateIn(["tabs",i,"code"],e=>(r&&a===t?n:a||n)||e)}));let u=Object(r.Map)();return s=s.update("subexercises",e=>{const t=e.findLastKey(e=>e.getIn(["completed","completed"]));let n=G()(t)?t+1:0;return n=n>=e.size?0:n,u=e.get(n),e.setIn([n,"unlocked"],!0).setIn([n,"active"],!0)}),u.get("isSolutionShown")&&!n&&(s=s.update("user",e=>pe(e,u,s.get("language"),"solutionReadOnly"))),s.get("subexercises").reduce((e,t)=>e&&t.getIn(["completed","completed"]),!0)&&(s=s.setIn(["user","completed","completed"],!0),s=fe(s)),n&&(s=Object(M.b)(s)),s})((e=>e.get("subExSet")?e:e.set("subExSet",!0).update("subexercises",e=>e.map(e=>e.setIn(["xpToWin"],e.get("xp",0)))))(e),t):e;const Se=e=>e.get("subexercises")||Object(r.List)(),he=e=>Se(e).findKey(e=>e.get("active"))||0,ye=(e,t)=>e.update("subexercises",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t(e)})),Oe=(e,t)=>e.updateIn(["subexercises",he(e)],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return t(e)})),Ee=(e,t)=>{const n=String(he(e))!==t;let r=e;if(n){const t="solution/"+Object(U.getTabTitle)("solutionReadOnly",e.get("language"),e.get("type"));r=r.removeIn(["user","editorTabs",t]).updateIn(["user","editorTabs"],e=>e.map(e=>e.removeIn(["props","lineErrors"])))}const a=Se(e).get(t);a.get("isSolutionShown")&&!Object(M.a)(e.get("type"))&&(r=e.update("user",t=>pe(t,a,e.get("language"),"solutionReadOnly")));const s="sql"===e.get("language")?"consoleSqlTabs":"consoleTabs";return r=r.removeIn(["user",s,"codeExplanation"]),ye(r,e=>((e,t)=>e.map(e=>e.set("active",!1)).update(t,e=>e.set("active",!0).set("unlocked",!0)))(e,t))};var _e=(e,t)=>{let n=Oe(e,n=>((e,t,n)=>{switch(n.type){case f.lc:return Q(e,n);case f.n:return Z(e,n).set("xpWon",e.get("xpToWin"));case f.ic:return V(e,n,e);case f.jc:return z(e,n.error);case f.C:return $(e);case f.sb:return e.set("isHintShown",n.isHintShown);case f.Gb:return ge(e,e,n).update("xpToWin",e=>e-n.xp);case f.Kb:return e.set("isSolutionShown",!0).update("xpToWin",e=>e-n.xp);case f.A:return"submit"===n.settings.command&&Object(m.i)(t,e)?e.set("last_attempt",n.settings.code):e;case f.ub:return e.set("choicesFocused",n.focused);case f.p:return e.updateIn(["tabs","script","code"],e=>n.code===e?e+" ":n.code);default:return e}})(n,e,t));switch(t.type){case f.n:if(n=fe(n).updateIn(["user","editorTabs"],e=>e.map(e=>e.removeIn(["props","lineErrors"]))),(e=>Boolean(Se(e).get(he(e)+1)))(n)){const e=n.get("language"),t=H()(L.a,e,{}),r="files/"+Object(U.getTabTitle)(t.editorPrefixTitle,e,n.get("type")),a=he(n)+1,s=n.get("subexercises").get(a).get("sample_code")||"";return n=n.setIn(["subexercises",a,"tabs",r,"code"],s),Ee(n,a)}return n;case f.Ub:return Ee(n,t.activeKey);case f.i:return ye(n,e=>e.setIn([t.index,"multipleChoiceAnswer"],t.choice));case f.Kb:{const e="solution/"+Object(U.getTabTitle)("solution",n.get("language"),n.get("type"));switch(n.get("type")){case"BulletConsoleExercise":case"TabConsoleExercise":return Oe(n,e=>Y(e,e.get("solution",""))).removeIn(["user","editorTabs",e]);default:return n.update("user",e=>pe(e,(e=>e.getIn(["subexercises",he(e)])||Object(r.Map)())(n),n.get("language"),"solutionReadOnly")).removeIn(["user","editorTabs",e])}}case f.lb:return n.update("subexercises",e=>e.map(e=>t.id===e.get("id")?e.setIn(["tabs",t.tabKey,"code"],t.code):e));default:return n}},Ie=n(109),Te=n.n(Ie),ve=n(410),xe=n.n(ve),we=n(52),Re=n.n(we),Ce=n(210),Ae=n.n(Ce),je=n(102),Pe=n.n(je),Ne=n(169),De=n(96),ke=(e,t,n)=>{switch(n.type){case f.sc:return e.update(Object(De.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.setIn(["props","error"],Object(r.fromJS)({message:Pe()(n,"settings.output.payload"),show:!0}))}));case f.Sb:return e.setIn(["query_result","props","error","show"],Boolean(n.show));case f.uc:return e.update(Object(De.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","error","show"],!1).removeIn(["props","table"]).setIn(["props","message"],n.settings.message)}));case f.vc:return e.update(Object(De.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","error","show"],!1).removeIn(["props","message"]).setIn(["props","table"],Object(r.fromJS)(n.settings))}));case f.wc:return e.update(n.settings.name,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","table"],Object(r.fromJS)(n.settings))}));case f.xc:return e.update(e=>e.mergeDeep(ue()(ce()(n.tableNames),e=>({title:e,extraClass:"animation--flash",props:{}}))));default:return e}},Me=n(175),Ue=n.n(Me);const Le=["ConsoleExercise","TabConsoleExercise","BulletConsoleExercise","MultipleChoiceExercise"];var Fe=e=>{const t=e.get("language"),n=H()(L.a,t,{});let a={};if("MarkdownExercise"===e.get("type")){const t=te()(()=>JSON.parse(e.get("sample_code")));se()(t)||(a=ue()(t,(e,t)=>({title:t,props:{code:e,active:re()(t,".Rmd"),resetCode:e,uniqueId:le()("code-editor-")}})))}const o=e.get("subexercises");let i=e.get("xp",0);o&&!o.isEmpty()&&(i=o.reduce((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(r.Map)();return e+t.get("xp")}),0));const u=!c()(e.get("sample_code"),"[");return Object(r.fromJS)({editorTabs:u?function(){const r=Object(U.getTabTitle)(n.editorPrefixTitle,t,e.get("type")),a="files/"+r;let s={};return(!Re()(Le,e.get("type"))||"sql"===t)&&(s={[a]:{title:r,isSolution:!1,props:{active:!0,isClosable:!1,code:null,extra:{}}}}),s}():function(e){const t=JSON.parse(e.get("sample_code")),n=s()(t,e=>e.open&&!e.isFolder);return Ue()(n,(e,t)=>(e[["files",t.name].join("/")]={title:t.name,isSolution:!1,props:{active:!0===t.focus,isClosable:!0,readOnly:!0===t.locked,code:t.content,resetCode:t.content}},e),{})}(e),consoleTabs:{console:{title:Object(U.getConsoleTitle)(t),props:{active:!0},dimension:{cols:400}},slides:{title:Object(X.c)("TabSlides.header"),props:{active:!1}}},consoleSqlTabs:{query_result:{extraClass:"",title:"query result",props:{active:!0,isNotView:!0,message:"No query executed yet..."}}},consoleObjectViewTabs:{},graphicalTabs:{plot:{extraClass:"animation--flash",title:"Plots",props:{sources:[],currentIndex:0},dimension:{isRealSize:!1,width:1,height:1}},html:{extraClass:"animation--flash",title:"HTML Viewer",props:{sources:[],currentIndex:0}}},inputMarkdownTabs:a,outputMarkdownTabs:{},markdown:{titles:["Knit PDF","Knit HTML"],activeTitle:"Knit HTML"},feedbackMessages:[],isHintShown:!1,lastSubmittedCode:null,lastRunCode:null,currentXp:i,ltiStatus:{},lastSubmitActiveEditorTab:null,usedAiFeatures:{aiIncorrectSubmissions:!1,aiErrorExplanations:!1}})};const He=e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();const n=t.update("sources",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e.set("id",le()("key:")).set("isExpanded",!1).set("expandedHasFocus",!1).set("expandedPath",null))})),a=n.get("sources").size-1;return n.set("currentIndex",a)},Be=e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();const n=t.set("sources",Object(r.List)().push(e));return n.set("currentIndex",0)},Ge=(e,t,n,r)=>e.setIn(["outputMarkdownTabs",n,"title"],r).updateIn(["outputMarkdownTabs",n,"props"],He(t)).update("outputMarkdownTabs",Object(De.a)(n));var Ke=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.Qc;if(!t)return null;switch((!e||e.size<2)&&(e=Fe(t).mergeDeep(e)),e=e.update("consoleSqlTabs",e=>ke(e,0,a)),a.type){case f.rc:return e.update("consoleObjectViewTabs",e=>e.update(a.settings.name,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title","Expected "+a.settings.name).setIn(["props","table"],Object(r.fromJS)(a.settings))})));case f.cc:return e.update(e=>e.set("consoleSqlTabs",Fe(t).get("consoleSqlTabs")).setIn(["completed","show"],!1)).set("consoleTabs",Fe(t).get("consoleTabs")).set("graphicalTabs",Fe(t).get("graphicalTabs")).set("outputMarkdownTabs",Fe(t).get("outputMarkdownTabs")).deleteIn(["editorTabs","html"]).delete("shellProxy");case f.y:return e.update(e=>"soft_init"===Pe()(a,"initCommandOptions.command")?e:e.delete("shellProxy"));case f.ac:return e.update("consoleTabs",Object(De.a)("console"));case f.Qb:return e.setIn(["completed","completed"],a.correct);case f.m:return Z(e,a).set("sidePanelIsClosed",!1).set("isNavigatingToNextExercise",!1).set("nextPath",void 0);case f.L:return a.id!==t.get("id")?e:e.setIn(["completed","show"],!1);case f.mc:return e.updateIn(["editorTabs",e.get("lastSubmitActiveEditorTab")],e=>N()(e)?e:e.setIn(["props","lineErrors"],a.output.payload));case f.hc:return V(e,a,t).set("sidePanelIsClosed",!1);case f.kc:return z(e,a.error).set("sidePanelIsClosed",!1);case f.lc:return Q(e,a).set("sidePanelIsClosed",!1);case f.C:return $(e);case f.gc:return e.set("currentXp",a.currentXp);case f.sb:return e.set("isHintShown",a.isHintShown);case f.Gb:return ge(e,t,a);case f.Kb:return be(e,t,"solution_",a).set("sidePanelIsClosed",!1);case f.i:return e.set("multipleChoiceAnswer",a.choice);case f.ub:return e.set("choicesFocused",a.focused);case f.jb:{const t=!R()(Ae()(a.results,e=>Re()(Ne.b,e.type)));return e.update(e=>{let t=e;return Te()(a.results,e=>{t=t.update(e.type,(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e.payload)})),t=t.update("responses",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e)}))}),t}).update("bottomPanelIsClosed",e=>!t&&e).update("consoleTabs",e=>t?Object(De.a)("console")(e):e)}case f.hb:return e.mergeIn(["graphicalTabs","plot","props","sources",a.index],{path:a.url,isRelativeToMultiplexer:!1});case f.dc:return e.setIn([a.category,a.key,"props","currentIndex"],a.index);case f.H:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{isExpanded:!0,expandedHasFocus:!0,expandedPath:null})}case f.K:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{expandedHasFocus:!0})}case f.e:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{expandedHasFocus:!1})}case f.k:{const t=e.getIn([a.category,a.key,"props","sources"],Object(r.List)()).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{isExpanded:!1})}case f.I:return e.setIn([a.category,a.tabKey,"props","sources",a.index,"expandedPath"],a.src);case f.V:return e.updateIn(["graphicalTabs","plot","props"],He(Object(r.Map)({type:"plot",path:a.url,isRelativeToMultiplexer:!1}))).update("graphicalTabs",Object(De.a)("plot"));case f.a:return e.set("proxyId",a.proxyId);case f.X:return e.set("shellProxy",""+a.payload);case f.W:{const n=Object(r.Map)({type:"iframe",path:a.payload,isRelativeToMultiplexer:!0});return"MarkdownExercise"===t.get("type")?Ge(e,n,"html","HTML Viewer"):e.updateIn(["editorTabs","html","props"],Be(n)).update("editorTabs",Object(De.a)("html")).setIn(["editorTabs","html","title"],"HTML Viewer")}case f.S:{let n=Object(r.Map)({type:"iframe",path:a.src,isRelativeToMultiplexer:a.isRelativeToMultiplexer});return N()(n.get("path"))&&(n=n.set("content",a.html).set("isRawContent",!0)),"MarkdownExercise"===t.get("type")?Ge(e,n,"html","HTML Viewer"):e.updateIn(["graphicalTabs","html","props"],He(n)).update("graphicalTabs",Object(De.a)("html"))}case f.U:return Ge(e,Object(r.Map)({type:"iframe",path:a.src,isRelativeToMultiplexer:!1}),"pdf","PDF Viewer");case f.T:return Ge(e,Object(r.Map)({type:"pdf",path:a.src,isRelativeToMultiplexer:a.isRelativeToMultiplexer}),"pdf","PDF Viewer");case f.Eb:{let t=Object(r.Map)({type:"iframe"});return t=N()(a.src)?t.merge({isRawContent:!0,content:a.html}):t.merge({path:a.src,isRelativeToMultiplexer:!1,isRawContent:!1}),e.updateIn(["editorTabs","html","props"],He(t)).update("editorTabs",Object(De.a)("html")).setIn(["editorTabs","html","title"],"HTML Viewer")}case f.Jb:return e.setIn(["editorTabs","rdoc"],Object(r.fromJS)({title:"RDocumentation",extraClass:"animation--flash",props:{path:a.payload}})).update("editorTabs",Object(De.a)("rdoc"));case f.oc:return e.setIn(["markdown","activeTitle"],a.activeTitle);case f.Vb:return e.update(a.category,Object(De.a)(a.activeKey)).update("bottomPanelIsClosed",e=>!Re()(["consoleTabs","consoleSqlTabs"],a.category)&&e);case f.b:{const{category:t,key:n,title:r}=a;return e.update(t,Object(De.b)({key:n,title:r})).update(t,Object(De.a)(n))}case f.tb:return e.set("ltiStatus",{status:a.status,message:a.message});case f.Z:return e.set("isNavigatingToNextExercise",!0);case f.xb:return e.set("nextPath",a.nextPath);case f.tc:return e.set("sqlOptions",Object(r.fromJS)(a.settings));case f.ib:return e.getIn(["graphicalTabs","plot","dimension","isRealSize"])?e:e.updateIn(["graphicalTabs","plot","dimension"],e=>xe()(a.components,"top-right-stack")?e.merge({width:a.components["top-right-stack"].innerWidth(),height:a.components["top-right-stack"].innerHeight()-52}):xe()(a.components,"top-left-stack")?e.merge({width:Math.round((a.components["top-left-stack"].innerWidth()-a.dimensions.borderWidth)/2),height:a.components["top-left-stack"].innerHeight()-52}):xe()(a.components,"bottom-stack")?e.merge({width:a.components["bottom-stack"].innerWidth(),height:Math.round((a.components["bottom-stack"].innerHeight()-a.dimensions.borderWidth-a.dimensions.headerHeight)/2-52)}):e.merge({width:640,height:540}));case f.A:return e.updateIn(["graphicalTabs","plot","props","currentIndex"],e=>"resize"===a.settings.command?a.settings.figureIndex:e).updateIn(["graphicalTabs","plot","dimension"],e=>{const{height:t,width:n}=a;return"resize"===a.settings.command&&G()(n)&&G()(t)?e.merge({isRealSize:!0,width:n,height:t}):e}).update("lastSubmittedCode",e=>"submit"===a.settings.command?a.settings.code:e).set("lastRunCode",a.settings.code).set("lastSubmitActiveEditorTab",e.get("editorTabs").findKey(e=>e.getIn(["props","active"],!1)));case f.Wb:return e.set("nr_attempts",a.nbAttempts);case f.zb:return e.set("sidePanelIsClosed",a.closed);case f.mb:return e.set("bottomPanelIsClosed",a.closed);case f.j:return e.hasIn(["editorTabs",a.tabKey])?e.deleteIn(["editorTabs",a.tabKey]):e;case f.Bb:return e.setIn(["usedAiFeatures","aiIncorrectSubmissions"],a.value);case f.Ab:return e.setIn(["usedAiFeatures","aiErrorExplanation"],a.value);default:return e}};const{STATUS:We,getStatus:Xe}=k.a,qe=(e,t,n)=>e?Ke(e.get("user"),e,t,n):null,Je=(e,t)=>{const n=e.get("all").findIndex(e=>e.get("id")===t.id);return n<0?e:e.updateIn(["all",n,"user",t.category],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.get(t.tabKey)?e.mergeDeep({[t.tabKey]:{props:{code:t.code,extra:t.extra}}}):e}))},Ve=e=>e.getIn(["all",e.get("current")],null),ze=e=>-1===e.get("all").findIndex((t,n)=>!(e.getIn(["progress",n,"completed"],!1)||t.getIn(["user","completed","completed"],!1)));var Ye=n(355);var Qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"course",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye.a:return"singleExercise"===t.queryParams.learningMode?"singleExercise":"singleChapter"===t.queryParams.learningMode?"singleChapter":"course";default:return e}};const Ze={workspaceNotes:void 0,workspaceTemplate:null};var $e=n(73);const et={isStarted:!1,isActive:!0,step:0},tt=$e.a.exercises.VIDEO_EXERCISE;const nt={lastErrorMessage:null,output:[]};function rt(e){const t=e.find(e=>"error"===e.type||"r-error"===e.type);return t?t.payload:null}var at=n(299),st=n(730),ot=n.n(st),ct=n(140),it=n.n(ct),ut=n(190);const dt=Object(r.Map)({uiTheme:"LIGHT"===it.a.get("campus_theme")?"LIGHT":"DARK",feedbackRatingStatus:"NONE",mobileView:"CONTEXT"});function lt(e){const t="LIGHT"===e.get("uiTheme")?"DARK":"LIGHT";return it.a.set("campus_theme",t),e.set("uiTheme",t)}const pt={[D.STATUS.FETCHING]:"SAVING",[D.STATUS.ERROR]:"ERROR",[D.STATUS.SUCCESS]:"SAVED"};var gt=n(67),bt=n(68),ft=n(298);const mt={type:bt.a.Unknown};function St(e,t){if(!t)return e;const{daily_xp:n,streak_goal:r,streak_state_after_goal_met:a,...s}=t;return{version:2,streakGoalMetInSession:!1,freezesAwardedInSession:0,screenVisible:!1,type:bt.a.Known,streakGoal:r,dailyXp:n,current:s,next:a}}function ht(e,t){const{dailyXp:n}=e,r=n+t.xpGained;return{...e,dailyXp:r}}function yt(e,t){const{current:n,dailyXp:r,streakGoal:a}=e,s=r+t.xpGained;return!n.streak_goal_met&&s>=a?function(e,t){var n;const{current:r,dailyXp:a,next:s}=e,o=a+t.xpGained,c=Math.max((null!==(n=null===s||void 0===s?void 0:s.freezes_available)&&void 0!==n?n:0)-r.freezes_available,0),i={...r,...s,streak:{...r.streak,...null===s||void 0===s?void 0:s.streak,last_incremented_at:new Date(t.currentTime||Date.now()).toISOString()}};return{...e,streakGoalMetInSession:!0,freezesAwardedInSession:c,dailyXp:o,current:i,next:null}}(e,t):ht(e,t)}const Ot=(e,t)=>t.currentTime>Date.parse(e.current.streak_deadline)?ht(e,t):yt(e,t);function Et(e){return{...e,screenVisible:!0}}function _t(e){return e.screenVisible?{...e,screenVisible:!1,streakGoalMetInSession:!1,freezesAwardedInSession:0}:e}var It=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;if(t.type===f.h)return St(e,t.entities.streakInfo);if(e.type===bt.a.Unknown||2!==e.version)return e;switch(t.type){case f.Ob:return St(e,t.data);case f.G:return Ot(e,t);case f.Fb:return Et(e);case f.M:return _t(e);default:return e}};var Tt=(e,t)=>function(e){return e&&e.type!==bt.a.Unknown?2===e.version:"on"===Object(gt.a)("wl--streak-freezes")}(e)?It(e,t):Object(ft.b)(e,t);const vt=Object(r.fromJS)({indicator:"none",description:"No status has been fetched from the Status Page."}),xt=(e,t)=>e.set("indicator",t.indicator).set("description",t.description);var wt=n(47);const Rt=Object(r.fromJS)({status:wt.a.NOT_INITIATE,settings:{aiFlags:{aiSolutionExplanationEnabled:!1,aiErrorExplanationEnabled:!1}}});var Ct={backendSessionJsonRpc:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.wb:return{status:"loaded",muxSessionManager:t.muxSessionManager};default:return e}},backendSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Dd;switch(t.type){case f.Xb:return{...h(e,y(t.status),t.statusCode),message:t.message};case f.A:return{...e,lastSubmittedCode:t.settings.code,lastSubmittedCommand:t.settings.command};case f.r:return h(e,m.a.BROKEN,500);case f.yb:return{...e,sessionId:t.sessionId};default:return e}},datawarehouseSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;const n="loading"===e.status&&"courseId"in t&&t.courseId!==e.courseId;switch(t.type){case f.pb:return n?e:t.session?{courseId:t.courseId,status:"success",session:t.session}:{courseId:t.courseId,status:"no-session"};case f.rb:return{courseId:t.courseId,status:"loading"};case f.qb:return n?e:{courseId:t.courseId,error:t.error,status:"error"};default:return e}},chapter:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case f.h:{const{chapters:e}=n.entities.course,{chapterId:a}=n,s=e.findIndex(e=>{let{id:t}=e;return t===a})===e.length-1,o=Object(r.fromJS)(I()(e,{id:a})).set("is_last_chapter",s);return t.mergeDeepIn(["current"],o)}case f.Yb:{const{chapters:e}=n,r=e.findIndex(e=>T(n,e))===e.size-1,a=e.find(e=>T(n,e)).set("is_last_chapter",r);return t.set("current",a)}case f.J:{const e=t.getIn(["current","id"]);return t.update("firstTimeCompletedChapters",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return t.set(e,!0)}))}case f.m:return t.set("window",Object(r.fromJS)({type:"fetching"}));case f.fb:return t.setIn(["window","show"],!1);case f.Lb:return t.setIn(["window","show"],!0);case f.Db:return t.set("window",Object(r.fromJS)({type:n.windowType,url:n.url,meta:n.meta,isCourseEndReached:null!==(e=n.isCourseEndReached)&&void 0!==e&&e}));default:return t}},course:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return e.merge(Object(r.fromJS)(t.entities.course)).update(e=>t.entities.courseProgress?e.update("progress",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep(Object(r.fromJS)(t.entities.courseProgress))})):e);case f.ec:{const n=C(e.get("chapters"),t.chapterRef);return n>-1?e.setIn(["chapters",n,"exercises"],t.exercises).setIn(["chapters",n,"progress"],t.progress):e}case f.u:{const n=C(e.get("chapters"),t.chapterRef);return e.deleteIn(["chapters",n,"exercises"]).deleteIn(["chapters",n,"progress"])}case f.bc:return"failed"===t.data.status||R()(t.data)?e:e.set("progress",Object(r.fromJS)(t.data));default:return e}},exercises:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Qc;const n=e.getIn(["progress",e.get("current")])||Object(r.Map)(),a=qe(Ve(e),n,t);switch(a&&(e=e.setIn(["all",e.get("current"),"user"],a)),N()(e.get("current"))||(e=e.setIn(["all",e.get("current")],me(Ve(e),n.get("subexercises")))),Ve(e)&&Ve(e).get("subexercises")&&(e=e.updateIn(["all",e.get("current")],e=>_e(e,t))),t.type){case f.h:{const n=t.exerciseNumber-1,{chapterProgress:a,exercises:s}=t.entities;return e.set("current",n).update("all",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.fromJS)(s);return e.zipWith((e,t)=>e.mergeDeep(t),Object(r.fromJS)(s))})).setIn(["all",t.exerciseNumber-1,"user"],Ke(null,Object(r.fromJS)(s[n]),Object(r.fromJS)(a?a[n]:{}))).update(e=>a?e.set("progress",Object(r.fromJS)(a)):e).set("canRateChapter",!1).update(e=>e.set("isChapterCompleted",ze(e)))}case f.cc:{const n=e.getIn(["all",t.index],null),a=e.getIn(["progress",t.index])||Object(r.Map)(),s=qe(n,a,t);let o=e.set("current",t.index).setIn(["all",t.index,"user"],s).set("canRateChapter",!1);return Object(M.a)(n&&n.get("type"))&&(o=o.updateIn(["all",t.index],e=>Object(M.b)(e))),o}case f.fc:return"failed"===t.data.status||R()(t.data)?e:e.set("progress",Object(r.fromJS)(t.data));case f.lb:return Je(e,t);case Xe(f.F,We.SUCCESS):return e.update(e=>e.set("all",Object(r.fromJS)(t.data.body.map(e=>({...e,...t.injection,randomNumber:Math.random()})))).set("current",null).set("canRateChapter",!1).update(e=>e.set("isChapterCompleted",ze(e))));case Xe(f.F,We.ERROR):return console.error("error to retrieve exercises, should give an explanation!"),e.update(e=>e.set("all",Object(r.List)()).set("current",null));case f.Qb:case f.m:return!e.get("isChapterCompleted")&&ze(e)?e.set("isChapterCompleted",!0).set("canRateChapter",!0):e;case f.Hb:return t.modal.code===m.e.CHAPTER_RATING.code?e.set("canRateChapter",!1):e;default:return e}},location:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Qc;switch(t.type){case f.h:return e.set("current",Object(r.Map)({pathname:t.pathname,query:Object(r.Map)(t.queryParams)})).set("language",t.language).set("canonical",t.canonical);case f.nc:return e.set("before",e.get("current")).set("current",Object(r.Map)({pathname:t.pathname,query:Object(r.Map)(t.query)}));default:return e}},settings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.f:return e.set("uiTheme",dt.get("uiTheme"));case f.eb:return[ut.b.LOGIN.code].indexOf(e.getIn(["modal","code"]))>-1?e:t.force||null==e.get("modal")?e.set("modal",null).set("isExerciseActive",!0):e.setIn(["modal","show"],!1).set("isExerciseActive",!0);case f.Hb:{let n=e;switch(n=n.getIn(["modal","code"])===t.modal.code?n.update("modal",e=>e.mergeDeep({...t.modal,show:!0})):n.set("modal",Object(r.fromJS)({...t.modal,show:!0})),n.getIn(["modal","code"])){case ut.b.ISSUE_REPORTER.code:case ut.b.FEEDBACK_REPORTER.code:n=n.setIn(["modal","submitRequestState"],null)}return n.set("isExerciseActive",!1)}case f.qc:{let n=e;return ot()(t.settings.show)&&(n=n.set("isExerciseActive",!t.settings.show)),N()(n.get("modal"))?n:n.update("modal",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep(t.settings)}))}case Object(D.getStatus)(f.C,D.STATUS.FETCHING):case Object(D.getStatus)(f.C,D.STATUS.ERROR):case Object(D.getStatus)(f.C,D.STATUS.SUCCESS):return e.set("feedbackRatingStatus",pt[t.requestStatus]);case f.Gb:case f.lc:case f.hc:case f.kc:case f.ic:return e.set("feedbackRatingStatus","NONE").set("mobileView","CONTEXT");case f.Kb:return e.set("feedbackRatingStatus","NONE").set("mobileView","EXERCISE");case Object(D.getStatus)(f.D,D.STATUS.FETCHING):case Object(D.getStatus)(f.D,D.STATUS.ERROR):case Object(D.getStatus)(f.D,D.STATUS.SUCCESS):return N()(e.get("modal"))?e:e.update("modal",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep({submitRequestState:t.requestStatus})}));case f.s:return e.set("shouldStopBackendManager",!0);case f.N:return e.update("shortcutsUsage",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}));case f.l:return e.set("shouldCloseShortcutFrame",!0);case f.Tb:return lt(e);case f.vb:return e.set("mobileView",t.selectedView);case f.m:return e.set("mobileView","CONTEXT");default:return e}},systemStatus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.yc:return xt(e,t.status);default:return e}},user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.h:return N()(t.entities.user)?e:e.set("status",t.entities.user.status).mergeDeepIn(["settings"],Object(r.fromJS)(t.entities.user.settings));case f.zc:return e.setIn(["settings","aiFlags"],t.aiFlags);default:return e}},boot:E.b,preFetchedData:at.c,images:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return t.entities.images;default:return e}},mobilePopup:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.Q:return e.set("linkSending",!0).set("linkFailed",!1);case f.R:return e.set("linkSent",!0).set("linkSending",!1).set("linkFailed",!1);case f.P:return e.set("linkSending",!1).set("linkFailed",!0);default:return e}},onboardingMilestones:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.c:case f.Z:case f.Y:return e.isStarted?{...e,isActive:!1}:e;case f.Qb:return e.isStarted&&t.correct&&t.exerciseType!==tt?{...e,isActive:!0,step:e.step+1}:e;case f.m:return e.isStarted&&t.completed?{...e,isActive:!0,step:e.step+1}:e;case f.bb:return{...e,isStarted:!0};default:return e}},contentAuthorization:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.o:return t.status===f.q.denied?{...e,[t.chapterId]:{status:t.status,denyReason:t.reason}}:{...e,[t.chapterId]:{status:t.status}};default:return e}},streakInfo:Tt,learningMode:Qe,notes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return{...e,workspaceTemplate:t.entities.workspaceTemplate};case f.Cb:return{...e,workspaceNotes:t.data};default:return e}},output:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"output/SET_CONSOLE_OUTPUT":return{output:[...e.output,...t.output],lastErrorMessage:rt(t.output)};case"output/CLEAR_CONSOLE_OUTPUT":return{output:[],lastErrorMessage:null};default:return e}},codeExplanation:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.y:return{...e,codeExplanation:{type:"initial"}};case f.nb:return{...e,codeExplanation:t.data};case f.ob:return{...e,codeExplanation:{...e.codeExplanation,type:t.codeExplanationType}};case f.Pb:switch(e.codeExplanation.type){case"streaming":return e.codeExplanation.prediction?{...e,codeExplanation:{...e.codeExplanation,prediction:{...e.codeExplanation.prediction,completion:e.codeExplanation.prediction.completion+t.partialCompletion}}}:e;case"initial":case"success":case"loading":case"error":default:return e}default:return e}},learningRecap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return t.learningRecap;default:return e}}};const At=Object(r.Record)({backendSession:S,backendSessionJsonRpc:void 0,boot:void 0,chapter:void 0,codeExplanation:void 0,contentAuthorization:void 0,datawarehouseSession:void 0,course:void 0,exercises:void 0,learningMode:void 0,learningRecap:void 0,location:void 0,mobilePopup:void 0,onboardingMilestones:void 0,notes:void 0,output:void 0,preFetchedData:void 0,settings:void 0,streakInfo:void 0,systemStatus:void 0,user:void 0,images:null},"StateRecord");t.b=e=>{let{history:t,initialState:n,middlewares:r}=e;const a=p.a.isProductionDomain()||p.a.isServerSideRendering||!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?i.d:window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,o=s()(r,(e,t)=>c()(t,"middleware")),b=a(Object(i.a)(l.a,...o,Object(d.b)(Object(g.a)({history:t,middlewares:r}))));return Object(i.e)(Object(u.combineReducers)(Ct,At),n,b)}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"q",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return S})),n.d(t,"h",(function(){return h})),n.d(t,"p",(function(){return O})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return _})),n.d(t,"l",(function(){return I})),n.d(t,"o",(function(){return T})),n.d(t,"i",(function(){return v})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return j}));var r=n(8),a=n(862),s=n(10),o=n(830),c=n(67),i=n(85),u=n(55);const d={LOGIN:"login",UNAUTHORIZED:"unauthorized",NOT_INITIATE:"not_initiate",PENDING:"pending",ERROR:"error"},l=e=>e.get("user")||Object(r.Map)(),p=e=>{const t=l(e).getIn(["settings","current_group_name"],"");return!!t&&t.includes("DataCamp")},g=e=>l(e).get("settings")||Object(r.Map)(),b=e=>g(e).get("first_name"),f=e=>Boolean(g(e).get("id")),m=e=>l(e).get("status")===d.UNAUTHORIZED,S=e=>l(e).get("status")===d.ERROR,h=e=>g(e).get("multiplexerUrl"),y=e=>g(e).get("groups",[]).some(e=>"enterprise"===e.get("type")&&"cancelled"!==e.get("status")),O=e=>g(e).get("language","en-US"),E=e=>{const t=Object(c.c)("exp_wl_explain_error_button"),n=g(e).getIn(["aiFlags","aiErrorExplanationEnabled"],!1);return t&&n},_=e=>{const t=Object(i.e)(e),n=Object(u.o)(e),r=g(e).getIn(["aiFlags","aiErrorExplanationEnabled"],!1),a=y(e),s=p(e);return Object(o.a)({courseId:t,exerciseType:n,feature:"aiHints",isB2BFlagEnabled:r,isUserB2B:a,isUserFromDatacamp:s})},I=e=>{const t=y(e),n=p(e),r=!t,a=g(e).getIn(["aiFlags","aiSolutionExplanationEnabled"],!1);if(r||a||n){return Object(c.c)("cp--explain-solution")}return!1},T=e=>{const t=!y(e),n=p(e);return t||n},v=e=>({activeProducts:g(e).get("active_products"),email:g(e).get("email"),id:g(e).get("id"),inEnterpriseGroup:y(e),language:g(e).get("language"),loggedIn:null==l(e).get("status")?void 0:f(e),notLoggedIn:null==l(e).get("status")?void 0:m(e),phone:g(e).get("phone"),statusError:null==l(e).get("status")?void 0:S(e)}),x=[735];let w=null;const R=e=>{const t=Object(i.e)(e),n=g(e).get("id");return x.includes(t)&&(e=>(null==w&&(w=a.support(1),window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - Wasm support",heap_event_properties:{app_id:s.a.appName,event_category:"learning",is_supported:w,identity:e}})),w))(n)},C=e=>R(e)&&Object(c.c)("cp--dual-code-execution-backend"),A=e=>R(e)&&Object(c.c)("cp--execute-code-in-wasm");function j(e){var t;return null!==(t=g(e).get("has_seen_campus_tour"))&&void 0!==t&&t}},55:function(e,t,n){"use strict";n.d(t,"r",(function(){return u})),n.d(t,"G",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"M",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"n",(function(){return x})),n.d(t,"m",(function(){return w})),n.d(t,"R",(function(){return R})),n.d(t,"l",(function(){return C})),n.d(t,"j",(function(){return A})),n.d(t,"I",(function(){return j})),n.d(t,"S",(function(){return P})),n.d(t,"t",(function(){return N})),n.d(t,"s",(function(){return D})),n.d(t,"p",(function(){return k})),n.d(t,"u",(function(){return M})),n.d(t,"F",(function(){return U})),n.d(t,"C",(function(){return L})),n.d(t,"N",(function(){return F})),n.d(t,"K",(function(){return H})),n.d(t,"h",(function(){return B})),n.d(t,"v",(function(){return G})),n.d(t,"g",(function(){return K})),n.d(t,"J",(function(){return W})),n.d(t,"x",(function(){return X})),n.d(t,"Q",(function(){return q})),n.d(t,"c",(function(){return J})),n.d(t,"z",(function(){return V})),n.d(t,"O",(function(){return z})),n.d(t,"d",(function(){return Y})),n.d(t,"D",(function(){return Q})),n.d(t,"B",(function(){return Z})),n.d(t,"H",(function(){return $})),n.d(t,"q",(function(){return ee})),n.d(t,"o",(function(){return te})),n.d(t,"A",(function(){return ne})),n.d(t,"E",(function(){return re})),n.d(t,"w",(function(){return ae})),n.d(t,"P",(function(){return se})),n.d(t,"L",(function(){return oe})),n.d(t,"y",(function(){return ce})),n.d(t,"b",(function(){return de})),n.d(t,"f",(function(){return le})),n.d(t,"k",(function(){return pe})),n.d(t,"U",(function(){return ge})),n.d(t,"T",(function(){return be}));var r=n(73),a=n(8),s=n(31),o=n.n(s),c=n(25);const i=r.a.exercises.VIDEO_EXERCISE,u=e=>e.getIn(["exercises","all"],Object(a.List)()),d=Object(c.createSelector)(u,e=>e.getIn(["exercises","current"]),(e,t)=>e.slice(t+1).groupBy(e=>e.get("type")).map(e=>e.map(e=>e.get("externalId")))),l=e=>u(e).size,p=e=>{const t=e.getIn(["exercises","current"]);if(u(e).getIn([t,"type"],null)===i)return null;const n=u(e).take(t).findLast(e=>e.get("type")===i);return o()(n)?null:n.toJS()},g=e=>e.getIn(["exercises","canRateChapter"]);var b=n(37),f=n.n(b),m=n(186),S=n.n(m),h=n(846),y=n(849),O=n(860),E=n(128),_=n(861),I=n.n(_),T=n(241);const v={HINT:"HINT",INCORRECT:"INCORRECT",SOLUTION:"SOLUTION",ASSISTANT:"ASSISTANT"},x=e=>e.getIn(["exercises","current"],null),w=Object(c.createSelector)(u,x,(e,t)=>{const n=e.get(t);if(!n)return Object(a.Map)();const r=n.get("id");return n.merge(Object(h.a)(r))}),R=e=>w(e).get("subexercises")||Object(a.List)(),C=e=>R(e).findLast(e=>e.get("active"))||R(e).get(0)||Object(a.Map)(),A=Object(c.createSelector)(C,w,(e,t)=>e.isEmpty()?t:e),j=e=>R(e).get(C(e).get("number"))||Object(a.Map)(),P=e=>w(e).get("user",Object(a.Map)()),N=Object(c.createSelector)(C,w,(e,t)=>(e.size>0?e:t.get("user",Object(a.Map)())).get("feedbackMessages",Object(a.List)()).map(n=>{if(n.messageType===v.HINT){const r=(e.isEmpty()?t:e).get("hint");return{...n,body:f()(r)?"No hint available":r}}return n})),D=e=>e.getIn(["exercises","progress"]),k=e=>{const t=w(e).get("id");return(e.getIn(["exercises","progress"])||Object(a.List)()).find(e=>e.get("exercise_id")===t)||Object(a.Map)()},M=Object(c.createSelector)(w,u,D,e=>e.getIn(["course","progress"]),e=>Object(E.a)(e).get("id"),O.a),U=Object(c.createSelector)(e=>k(e).get("nr_attempts"),e=>P(e).get("nr_attempts"),(e,t)=>S()([e,t,0])),L=e=>P(e).get("lastSubmittedCode",null),F=e=>P(e).get("shellProxy")||C(e).get("shellProxy"),H=e=>P(e).get("editorTabs",Object(a.Map)()),B=e=>P(e).get("consoleTabs",Object(a.Map)()),G=e=>P(e).get("graphicalTabs",Object(a.Map)()),K=e=>P(e).get("consoleSqlTabs",Object(a.Map)()),W=e=>P(e).get("consoleObjectViewTabs",Object(a.Map)()),X=e=>P(e).get("inputMarkdownTabs",Object(a.Map)()),q=e=>P(e).get("sqlOptions",Object(a.Map)()),J=e=>P(e).get("backend-error",Object(a.List)()),V=e=>P(e).getIn(["completed","show"],!1),z=e=>P(e).get("sidePanelIsClosed",!1),Y=e=>P(e).get("bottomPanelIsClosed",!1),Q=e=>P(e).get("ltiStatus",{status:"none"}).status,Z=e=>P(e).get("isNavigatingToNextExercise",!1),$=e=>P(e).get("nextPath"),ee=e=>w(e).get("type"),te=Object(c.createSelector)(w,C,(e,t)=>{var n;return null!==(n=t.get("type"))&&void 0!==n?n:e.get("type")}),ne=Object(c.createSelector)(ee,e=>Object(y.a)(e)),re=e=>P(e).get("markdown",Object(a.Map)()),ae=Object(c.createSelector)(w,C,(e,t)=>{const n=(t,n)=>{let{hint:r,isHintShown:a,isSolutionShown:s,solution:o,xp:c}=t,i=I()((a?.7:.3)*c);!r&&o&&(a=!0,i=c);let u=!a&&Boolean(r)||!s&&Boolean(o);return n&&(u=!1),Object(T.c)(e.get("type"))&&a&&(u=!1),{isVisible:u,isSolution:a,isSolutionShown:s,xp:i}};return t.isEmpty()?n({isHintShown:e.getIn(["user","isHintShown"],!1),isSolutionShown:e.getIn(["user","isSolutionShown"],!1),xp:e.get("xp",0),hint:e.get("hint",!1),solution:e.get("solution",!1)}):n(t.toJS(),t.getIn(["completed","completed"]))}),se=Object(c.createSelector)(w,C,(e,t)=>{var n;return null!==(n=t.get("solution"))&&void 0!==n?n:e.get("solution")}),oe=Object(c.createSelector)(w,C,(e,t)=>{var n;return null!==(n=t.get("pre_exercise_code"))&&void 0!==n?n:e.get("pre_exercise_code")}),ce=Object(c.createSelector)(w,C,(e,t)=>{var n;return null!==(n=t.get("instructions"))&&void 0!==n?n:e.get("instructions")}),ie=["MultipleChoiceExercise"],ue=e=>!ie.includes(e),de=(e,t)=>ue(e.get("type"))&&ue(t&&t.get("type")),le=Object(c.createSelector)(w,C,de),pe=Object(c.createSelector)(k,e=>P(e).get("completed",Object(a.Map)()),M,(e,t,n)=>{const r=e.get("completed"),a=t.get("isFirstTime");return!r&&a?n.exercise.xp:0}),ge=e=>P(e).getIn(["usedAiFeatures","aiIncorrectSubmissions"],!1),be=e=>P(e).getIn(["usedAiFeatures","aiErrorExplanation"],!1)},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));let r=function(e){return e.Known="StreakKnown",e.Unknown="StreakUnknown",e}({})},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return E})),n.d(t,"i",(function(){return _})),n.d(t,"k",(function(){return I})),n.d(t,"l",(function(){return T})),n.d(t,"p",(function(){return v})),n.d(t,"o",(function(){return x})),n.d(t,"q",(function(){return R})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return P})),n.d(t,"f",(function(){return N})),n.d(t,"a",(function(){return D})),n.d(t,"m",(function(){return k})),n.d(t,"n",(function(){return M})),n.d(t,"r",(function(){return U})),n.d(t,"h",(function(){return L})),n.d(t,"j",(function(){return F}));var r=n(75),a=n(8),s=n(33),o=n.n(s),c=n(701),i=n.n(c),u=n(70),d=n.n(u),l=n(25),p=n(10),g=n(125),b=n(832),f=n(213),m=n(128),S=n(55),h=n(364),y=n(139);const O=e=>e.get("course"),E=Object(l.createSelector)(O,e=>{if(void 0!==e)return e.get("id")}),_=Object(l.createSelector)(O,S.m,(e,t)=>{if(void 0===e)return"r";const n=e.get("programming_language","r");return t.get("programming_language")||n}),I=Object(l.createSelector)(O,S.m,h.a,(e,t,n)=>{if(null==e)return"";const{runtimeConfig:r}=Object(f.a)({course:e.toJS(),exercise:t.toJS(),images:n});return r}),T=Object(l.createSelector)(O,e=>e.get("shared_image")),v=Object(l.createSelector)(O,e=>e.get("technology_id")),x=Object(l.createSelector)(v,e=>g.a[e]),w=Object(l.createSelector)(O,e=>e.get("topic_id")),R=Object(l.createSelector)(w,e=>b.a[e]),C=Object(l.createSelector)(m.a,e=>e.get("number",void 0)-1),A=e=>O(e).get("case_study"),j=e=>O(e).get("datasets",Object(a.List)()),P=e=>O(e).get("title"),N=e=>O(e).get("slug")||O(e).get("id"),D=e=>e.getIn(["course","chapters"],Object(a.List)()),k=(Object(l.createSelector)(D,C,(e,t)=>e.get(t+1,null)),Object(l.createSelector)(D,C,(e,t)=>t>0?e.get(t-1,null):null),Object(l.createSelector)(m.b,e=>e.getIn(["course","progress","user_chapters",C(e)])||null,e=>e.getIn(["course","progress"]),m.f,(e,t,n,r)=>!r.get(e)&&!(t&&t.get("completed"))&&!(n&&n.get("completed")))),M=Object(l.createSelector)(O,S.m,y.a,(e,t,n)=>{const r=e.get("state"),a=t.get("randomNumber");return"singleExercise"!==n&&("beta_testing"===r||"soft_launched"===r&&a<.3||"live"===r&&a<.1)}),U=Object(l.createSelector)(O,S.s,m.a,S.r,(e,t,n,a)=>{const s=e.toJS(),o=d()(Object(r.c)("glossary:chapter",{count:1}));let c=[];if(Array.isArray(s.chapters)&&(c=s.chapters.map((e,t)=>({id:"chapter-"+e.id,label:`${o} ${t+1}`,progress:0})),s.progress&&t&&a)){const e=n.get("id"),r=(e,t)=>null!==e.get("completed_at")||a.getIn([t,"user","completed","completed"],!1),u={nb_completed_exercises:t.count(r)};c=s.progress.user_chapters.map((t,n)=>{const r=s.chapters[n],a=t.chapter_id===e?u:t;return{id:"chapter-"+t.chapter_id,label:`${o} ${n+1}`,link:`${p.a.urls.datacamp}/courses/${s.id}/chapters/${r.id}/continue`,progress:i()(a.nb_completed_exercises/r.nb_exercises*100)}})}return c}),L=Object(l.createSelector)(O,e=>e.get("reduced_outline")),F=Object(l.createSelector)(L,y.a,(e,t)=>"singleChapter"!==t&&("singleExercise"!==t&&!e));Object(l.createSelector)(k,S.u,(e,t)=>o()(t,"course.completed",!1)&&e||o()(t,"chapter.completed",!1)&&e)},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(76),a=n(2);const s=()=>(e,t)=>{e({type:"dailyStreak/DAILY_STREAK_MOBILE_LINK_SENDING"});const n=t(),s=a.F(n).get("id"),o=a.v(n),c=a.S(n).get("id");return r.e.sendDailyStreakMobileLink({courseId:s,chapterId:o,exerciseId:c}).then(()=>e({type:"dailyStreak/DAILY_STREAK_MOBILE_LINK_SENT"})).catch(()=>e({type:"dailyStreak/DAILY_STREAK_MOBILE_LINK_FAILED"}))}},945:function(e,t,n){"use strict";n.r(t),n.d(t,"middlewareRecordStore",(function(){return l})),n.d(t,"middlewareSentry",(function(){return b})),n.d(t,"handleInputResponse",(function(){return K})),n.d(t,"epicClearBackendClientSettings",(function(){return W})),n.d(t,"epicRegisterMux",(function(){return q})),n.d(t,"epicUpdateBackendStatus",(function(){return z})),n.d(t,"epicStopBackendSession",(function(){return Y})),n.d(t,"epicCreateSession",(function(){return Q})),n.d(t,"epicSubmitCode",(function(){return Z})),n.d(t,"JSON_RPC_LANGUAGES",(function(){return ne})),n.d(t,"epicRegisterJsonRpcSession",(function(){return re})),n.d(t,"epicStartJsonRpcSession",(function(){return ae})),n.d(t,"epicSubmitJsonRpcCode",(function(){return se})),n.d(t,"epicStopJsonRpcSession",(function(){return oe})),n.d(t,"epicCheckDatawarehouseSession",(function(){return ue})),n.d(t,"epicSetLoading",(function(){return de})),n.d(t,"epicStartDatawarehouseSession",(function(){return le})),n.d(t,"epicPingDatawarehouseSession",(function(){return ge})),n.d(t,"epicGetLogs",(function(){return he})),n.d(t,"epicAppendLogsToConsole",(function(){return ye})),n.d(t,"epicGetExercisesFromChapter",(function(){return Et})),n.d(t,"epicUpdateCourseProgress",(function(){return _t})),n.d(t,"middlewareResetCourseProgress",(function(){return It})),n.d(t,"middlewareUpdateCourse",(function(){return Tt})),n.d(t,"getChapterProgress",(function(){return Ze})),n.d(t,"epicUpdateExercises",(function(){return $e})),n.d(t,"epicConsoleCode",(function(){return et})),n.d(t,"epicCompletingSubExercise",(function(){return tt})),n.d(t,"epicCompleteSubExercise",(function(){return nt})),n.d(t,"epicCompleteExercise",(function(){return rt})),n.d(t,"epicSubmitExerciseRating",(function(){return at})),n.d(t,"epicSubmitChapterRating",(function(){return st})),n.d(t,"epicShowSlideInModal",(function(){return ot})),n.d(t,"epicUpdateConsoleCode",(function(){return ct})),n.d(t,"tryNavigateToNextExercise",(function(){return it})),n.d(t,"epicSetLtiStatus",(function(){return ut})),n.d(t,"epicNextInternalExercise",(function(){return dt})),n.d(t,"epicExerciseCompleted",(function(){return lt})),n.d(t,"epicFirstChapterCompleted",(function(){return St})),n.d(t,"epicCheckDailyStreak",(function(){return vt})),n.d(t,"epicRefreshStreakInfo",(function(){return xt})),n.d(t,"epicUpdateLocation",(function(){return wt})),n.d(t,"requestToLti",(function(){return Ke})),n.d(t,"submitToMainApp",(function(){return We})),n.d(t,"reportOutputToHeap",(function(){return Xe})),n.d(t,"epicExternalCalls",(function(){return qe})),n.d(t,"epicSubmitFeedback",(function(){return Ct})),n.d(t,"epicSubmitIssue",(function(){return At})),n.d(t,"epicShowPayWallModal",(function(){return jt})),n.d(t,"epicLoggedIn",(function(){return Mt})),n.d(t,"epicStartTimeTracking",(function(){return Ut})),n.d(t,"epicWindow",(function(){return Bt})),n.d(t,"epicRegisterOutputMuxCallbacks",(function(){return Xt})),n.d(t,"epicSessionStarted",(function(){return zt})),n.d(t,"epicOnCrashedSession",(function(){return Yt})),n.d(t,"epicOnWorkspaceReady",(function(){return Qt})),n.d(t,"epicOnCodeSubmitted",(function(){return Zt})),n.d(t,"epicOnReportSent",(function(){return $t})),n.d(t,"epicNextExternalExercise",(function(){return nn})),n.d(t,"epicSubmitExternalExercise",(function(){return rn})),n.d(t,"epicBoot",(function(){return Un})),n.d(t,"epicBootFailed",(function(){return Ln})),n.d(t,"epicBootSucceeded",(function(){return Fn})),n.d(t,"middlewareReduxArray",(function(){return Hn})),n.d(t,"epicFetchGroupsAiSettings",(function(){return Kn}));var r=n(48),a=n.n(r),s=n(864),o=n.n(s),c=n(10),i=n(506),u=n(2);let d=null;const l=e=>t=>n=>{d=e,t(n)},p=e=>{const t=u.S(e);return e.delete("exercises").set("currentExercise",t).delete("preFetchedData")};let g=()=>e=>t=>e(t);if(c.a.sentryEnabled){let e=0;g=o()(i.b,{...i.a,dataCallback:e=>(e.extra||(e.extra={}),e.extra.state||(e.extra.state=d&&p(d.getState()).toJS()),e),shouldSendCallback:()=>(e+=1,e<=2)},{stateTransformer:p})}const b=g;var f=n(295),m=n.n(f),S=n(259),h=n.n(S),y=n(113),O=n.n(y),E=n(122),_=n.n(E),I=n(52),T=n.n(I),v=n(37),x=n.n(v),w=n(91),R=n.n(w),C=n(62),A=n.n(C),j=n(13),P=n.n(j),N=n(87),D=n(865),k=n(405),M=n(51),U=n(169),L=n(380),F=n(4),H=n(213);let B=0,G=!1;const K=(e,t,n)=>{let r=P.a.Observable.of();if(!x()(t)){const e=((e,t)=>{const n=t(),r=(()=>{switch(n){case"revo":case"r":return"error";default:return"backend-error"}})(),a=_()(e,e=>e.type===r);return a?P.a.Observable.of(F.Rc(a)):P.a.Observable.empty()})(t,n);r=r.concat(P.a.Observable.of(F.Nd({results:t})),e)}return r},W=e=>e.ofType(F.s).do(()=>{G=!0}).concatMap(()=>P.a.Observable.of()),X=(e,t,n)=>{const r=(e=>{let{language:t,state:n,userInfo:r}=e;return u.xb(n)?Object(L.a)():u.nb(n)?Object(D.a)({language:t,state:n,userInfo:r}):new m.a.AsyncSession(r,{multiplexerUrl:u.Lb(n),language:t,flattenOutputs:!1,retryOptions:{delay:1e3,nbOfRetry:10}})})({language:e,state:t,userInfo:n});Object(N.b)(r)},q=(e,t)=>{const n=new P.a.BehaviorSubject({status:m.a.AsyncSession.STATUS.NONE});return e.ofType(F.h).switchMap(r=>{const a=t.getState(),s=u.Cb(a),o=A()(r.entities.user.settings,["email","authentication_token"]);if(u.Ab(a))return[F.ed({status:u.a.READY.code})];if(!T()(["r","revo","python","sql","shell","scala","julia","containers"],s))return[];X(s,a,o);const c=Object(N.a)();c.subscribe(e=>n.next(e));const i=()=>u.Cb(t.getState());return P.a.Observable.merge(P.a.Observable.bindCallback((function(){return c.client.on(...arguments)}))("new").filter(e=>null!=e.body.proxyId).map(e=>F.Ac({proxyId:e.body.proxyId})),P.a.Observable.of(F.Wc()),c.output$.concatMap(t=>K(e,t,i)).catch(()=>P.a.Observable.empty()),n.distinctUntilChanged(R.a).map(e=>F.ed({status:e.status,statusCode:e.statusCode,message:e.message,error:e.error})))})},J=P.a.Observable.of({indicator:"none",description:"The Status Page could not be reached."}),V={method:"get",url:"https://swwcn587820m.statuspage.io/api/v2/status.json",options:{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},json:!0}},z=e=>e.ofType(F.E).mergeMap(e=>{let t,n;return e.status===u.a.BROKEN.code?(t=a()(V).map(e=>e.body.status).catch(()=>J),n=P.a.Observable.of(F.Sd(!1))):(t=P.a.Observable.empty(),n=P.a.Observable.empty()),P.a.Observable.merge(P.a.Observable.of(F.Ae({status:e.status,statusCode:e.statusCode,message:e.message})),n,t.map(e=>F.Ye(e)))}),Y=e=>{const t=e.filter(N.a);return P.a.Observable.merge(t.ofType(F.ab).do(O()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stopPolling()})),t.ofType(F.Nb).do(O()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stop()}))).concatMapTo(P.a.Observable.empty())},Q=(e,t,n)=>e.ofType(F.pb).combineLatest(e.ofType(F.w),e=>e).filter(()=>null!=Object(N.a)()).withLatestFrom(e.ofType(F.y),(e,t)=>t).do(e=>{e.force_new&&(h.a.erase("mux-session-id"),h.a.erase("AWSELB"))}).switchMap(e=>{var r;const a=t.getState(),s=u.cc(a).toJS(),o=u.F(a).toJS(),c=u.S(a).toJS(),i=u.hb(a),d=u.Rc(a),{image:l,runtimeConfig:p}=Object(H.a)({course:o,exercise:c,images:i});B=B+1||1;const g=e.force_new||1===B;let b={...e,runtime_config:p,course_id:o.id,image:l,shared_image:o.shared_image,specific_session_id_or_new:d,...s,force_new:g};b=A()(b,["language","runtime_config","force_new","course_id","image","shared_image","specific_session_id_or_new"]);const f=u.P(a),m={command:"init",clientEnvironment:Object(M.a)(n.location.pathname)?"campus_preview":"campus",...e.initCommandOptions};return"success"===f.status&&(m.pec=function(e,t){if(!e)return e;return e.replace(/<SESSION_DB_USER>/g,t.dbUser).replace(/<SESSION_DB_PASSWORD>/g,t.dbPassword).replace(/<SESSION_DB_NAME>/g,t.dbName).replace(/<SESSION_DB_ROLE>/g,t.dbRole)}(m.pec,f.session)),null===(r=Object(N.a)())||void 0===r||r.start(b,m),new Promise(e=>{var t;null===(t=Object(N.a)())||void 0===t||t.client.on("new",t=>{var n;e(F.ee({sessionId:t.body.id})),null===(n=Object(N.a)())||void 0===n||n.client.off("new")})})});const Z=(e,t)=>e.ofType(F.A).filter(e=>{let{settings:{command:t,language:n}}=e;return!T()(["resize","expand"],t)||T()(["r","revo"],n)}).map(e=>{const n=t.getState(),r=Object(k.a)(n).prepareSubmit(n,e);return{type:e.type,timestamp:e.timestamp,...r}}).filter(()=>!G).throttleTime(500).concatMap(e=>{if(e.useOutputToActions)return Object(U.a)(e.language,e.output,e.exerciseType);const n=Object(N.a)();if(n){var r;const a=null===(r=u.o(t.getState()))||void 0===r?void 0:r.status;if((null===a||void 0===a?void 0:a.code)!==u.a.BROKEN.code)return n.input(e),[F.Ed({timestamp:e.timestamp,language:e.language})]}return P.a.Observable.empty()});var $=n(197),ee=n(507),te=n(873);const ne=["java","rust"],re=(e,t)=>{const n=new P.a.BehaviorSubject({status:"busy"});return e.ofType(F.h).switchMap(e=>{var r;const a=t.getState();if(u.Ab(a))return[F.ed({status:u.a.READY.code})];const s=u.Cb(a);if(!ne.includes(s))return[];const o=A()(null===(r=e.entities.user)||void 0===r?void 0:r.settings,["authentication_token","email"]),c=ee.b.safeParse(o);if(!c.success)return[];const i=u.F(a).toJS(),d=u.S(a).toJS(),l=u.hb(a),{image:p,runtimeConfig:g}=Object(H.a)({course:i,exercise:d,images:l}),b=u.cc(a).toJS(),f={language:u.Cb(a),course_id:u.H(a),runtime_config:g,image:p,shared_image:u.gc(a),excluded_session_id:null,...b},m=new ee.a({user:c.data,startOptions:f});return m.subscribeToStatus(e=>n.next(e)),P.a.Observable.merge(P.a.Observable.of(F.ce(m)),P.a.Observable.of(F.Wc()),n.distinctUntilChanged(R.a).map(e=>F.ed({status:e.status,message:e.message})))})},ae=(e,t)=>e.ofType(F.y).combineLatest(e.ofType(F.w),e=>e).withLatestFrom(e.ofType(F.y),(e,t)=>t).do(e=>{e.force_new&&(h.a.erase("mux-session-id"),h.a.erase("AWSELB"))}).concatMap(e=>{const n=t.getState(),r=u.Mb(n);if(!r)return P.a.Observable.empty();const a=u.F(n).toJS(),s=u.S(n).toJS(),o=u.Rc(n),c=u.hb(n),{image:i,runtimeConfig:d}=Object(H.a)({course:a,exercise:s,images:c}),l=u.cc(n).toJS(),p={language:u.Cb(n),course_id:u.H(n),runtime_config:d,image:i,shared_image:u.gc(n),force_new:e.force_new,specific_session_id_or_new:o,...l};return P.a.Observable.from(r.start(p)).map(()=>null==r.sessionId?F.Cd():F.ee({sessionId:r.sessionId}))}),se=(e,t)=>e.ofType(F.A).map(e=>{const n=t.getState(),r=Object(k.a)(n).prepareSubmit(n,e);return{type:e.type,timestamp:e.timestamp,...r}}).throttleTime(500).concatMap(e=>{const n=t.getState(),r=u.Mb(n);if(null===r||null===r.client.remoteSession)return P.a.Observable.empty();const a={language:e.language,code:e.code},s=$.RunCodeParams.safeParse(a);if(!s.success)return P.a.Observable.empty();const o=F.Ed({language:s.data.language,timestamp:e.timestamp});return P.a.Observable.from(Object(te.a)({muxSessionManager:r,commandConfig:{code:e.code,language:e.language,sct:e.sct,command:e.command}})).map(e=>{const t=e.filter(e=>"sct"!==e.type);return[F.Ud(t),F.Nd({results:e}),o]}).catch(e=>{const t=e instanceof Error?e.message:e;return[F.Rc({type:"backend-error",payload:t}),o]})}),oe=(e,t)=>{const n=t.getState(),r=u.Mb(n),a=()=>null!==r&&null!==r.client.remoteSession;return P.a.Observable.merge(e.ofType(F.ab).filter(a).do(()=>null===r||void 0===r?void 0:r.client.closeConnection()).concatMapTo(P.a.Observable.empty()),e.ofType(F.Nb).filter(a).do(()=>null===r||void 0===r?void 0:r.stop()).concatMapTo(P.a.Observable.empty())).concatMapTo(P.a.Observable.empty())};var ce=n(76),ie=n(80);const ue=(e,t)=>e.ofType(F.y).switchMap(()=>{const e=t.getState(),n=u.Cb(e),r=u.cc(e).toJS(),a=u.F(e).toJS(),s=u.P(e),o=parseInt(r.course_id,10),c=Number.isInteger(o)?o:a.id;if("loading"===s.status&&s.courseId===c)return P.a.Observable.empty();return"sql"!==n||u.Ab(e)?P.a.Observable.of(F.Vd({courseId:c,session:null})):P.a.Observable.of(F.Yc({courseId:c}))}),de=e=>e.ofType(F.x).switchMap(e=>P.a.Observable.of(F.Xd({courseId:e.courseId}))),le=e=>e.ofType(F.x).switchMap(async e=>{try{return{type:"session",session:await ce.b.createDatawarehouseSession({courseId:e.courseId}),action:e}}catch(t){return function(e){return null!=e&&"object"===typeof e&&("status"in e&&404===e.status||"statusCode"in e&&404===e.statusCode)}(t)?{type:"action",action:F.Vd({courseId:e.courseId,session:null})}:{type:"action",action:F.Wd({error:t,courseId:e.courseId})}}}).switchMap(e=>{if("action"===e.type)return P.a.Observable.of(e.action);const{action:t,session:n}=e,{status:r}=n;switch(r){case"ready":return P.a.Observable.of(F.Vd({courseId:t.courseId,session:{sessionId:n.id,dbName:n.dbName,dbUser:n.dbUser,dbRole:n.dbRole,dbPassword:n.dbPassword}}));case"creating":return(e=>{let{courseId:t,sessionId:n}=e;return P.a.Observable.interval(1e3).switchMap(()=>ce.b.getDatawarehouseSession({sessionId:n})).timeout(6e4).first(e=>{let{status:t}=e;switch(t){case"ready":case"error":case"expired":return!0;case"creating":return!1;default:throw new Error("Unknown session status: "+t)}}).map(e=>{switch(e.status){case"ready":return F.Vd({courseId:t,session:{sessionId:n,dbName:e.dbName,dbUser:e.dbUser,dbRole:e.dbRole,dbPassword:e.dbPassword}});case"error":return F.Wd({error:new Error("Failed to create data warehouse session"),courseId:t});case"expired":return F.Wd({error:new Error("Session has expired"),courseId:t});case"creating":return F.Dd;default:return Object(ie.a)(e)}}).catch(e=>P.a.Observable.of(F.Wd({error:e,courseId:t})))})({courseId:t.courseId,sessionId:n.id});case"error":return P.a.Observable.of(F.Wd({error:new Error("Failed to create data warehouse session"),courseId:t.courseId}));case"expired":return P.a.Observable.of(F.Wd({error:new Error("Session has expired"),courseId:t.courseId}));default:throw new Error("Unknown session status: "+r)}});function pe(e){return null!==e.session}const ge=(e,t)=>e.ofType(F.pb).filter(pe).switchMap(e=>"success"===u.P(t.getState()).status?P.a.Observable.timer(0,3e4).takeWhile(()=>"success"===u.P(t.getState()).status).mergeMap(()=>(ce.b.keepDatawarehouseSessionAlive({sessionId:e.session.sessionId}).catch(()=>P.a.Observable.empty()),P.a.Observable.empty())):P.a.Observable.empty());var be=n(107),fe=n.n(be),me=n(874),Se=n.n(me);const he=(e,t)=>e.ofType(F.Xb).switchMap(e=>e.status!==u.a.READY.code?[]:P.a.Observable.timer(2e3,2e3).filter(()=>null!=Object(N.a)()).filter(()=>"ShinyExercise"===u.W(t.getState())).do(()=>{Object(N.a)().input({command:"logs"})}).concatMapTo([])),ye=e=>P.a.Observable.merge(e.ofType(F.db).combineLatest(e.ofType(F.d),(e,t)=>({callbackAction:e,logAction:t})),e.ofType(F.y)).scan((e,t)=>{if(t.type===F.y)return 0;const{callbackAction:n,logAction:r}=t;if(!fe()(r.log))return e;const a=Se()(r.log,/(\x9B|\x1B\[)[0-?]*[ -/]*[@-~]/g,""),s=a.slice(e);return s&&n.callback([{payload:s}]),a.length},0).concatMapTo([]);var Oe=n(30),Ee=n(38),_e=n(53),Ie=n(73),Te=n(376),ve=n.n(Te),xe=n(496),we=n.n(xe),Re=n(534),Ce=n.n(Re),Ae=n(31),je=n.n(Ae),Pe=n(193),Ne=n(167),De=n(253),ke=n(385),Me=n(141),Ue=n(102),Le=n.n(Ue);const Fe=Object(Ee.d)(),He=Object(Ee.a)(),Be=Object(Ee.e)(),Ge=()=>Fe.execute(Oe.c.endpoint.submitLti()).map(()=>F.Zd({status:"success",message:"Score successfully sent"})).catch(()=>P.a.Observable.of(F.Zd({status:"failure",message:"There was an error sending your score"}))),Ke=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=u.F(t.getState()).toJS(),a=u.u(t.getState()).toJS(),s=Ge();if(e.correct||n){const{ltiSettings:e}=Fe;return null!=e&&e.chapterId===a.id?e.active?s:P.a.Observable.empty():Fe.execute(Oe.c.endpoint.ltiIsActive({courseId:r.id,chapterId:a.id})).concatMap(e=>e.body?(Fe.ltiSettings={active:!0,chapterId:a.id},s):P.a.Observable.throw("200-but-empty")).catch(()=>(Fe.ltiSettings={active:!1,chapterId:a.id},P.a.Observable.of(F.Zd({status:"inactive",message:"No LTI key in session"}))))}return P.a.Observable.empty()},We=(e,t,n)=>((e,t,n)=>{const r=t.getState(),a=u.N(r).get("id")||u.S(r).get("id"),s=u.Xb(t.getState());if(!a)return P.a.Observable.empty();const o=u.S(r).toJS(),c=e.code||u.Db(t.getState())||"",i=u.N(t.getState()),d=i.isEmpty()?Le()(o,"user.currentXp"):i.get("xpToWin");return(Object(M.a)(n.location.pathname)?Be:He).execute(Oe.c.endpoint.postSubmitCode({authentication_token:Fe.getAuthenticationToken(),code:c,correct:e.correct,feedback_msg:e.message,id:a,xp:je()(e.xp)?d:e.xp,contentLanguage:s}))})(e,t,n).concatMap(n=>{let r=Ke(e,t);return n.body&&null!=n.body.xp_gained&&(r=r.merge(P.a.Observable.of(F.id({xpGained:n.body.xp_gained,currentTime:Date.now()})))),r}).catch(e=>{const t=P.a.Observable.of(),n=Le()(e,"error.status"),r=403===n;return 401===n?t.concat(P.a.Observable.of(F.le({modal:u.e.LOGIN}))):r?t.concat(P.a.Observable.of(F.me())):t.concat(P.a.Observable.throw(e))}),Xe=(e,t)=>{var n;const r=t.getState(),a=u.Oc(r).get("id"),s=u.N(r).get("id")||u.S(r).get("id"),o=u.N(r).get("type")||u.S(r).get("type"),{lastSubmittedCode:i,lastSubmittedCommand:d}=null!==(n=u.o(r))&&void 0!==n?n:{},l=u.xb(r)?"Pyodide Output":"Mux Output",{appName:p}=c.a;return window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - "+l,heap_event_properties:{app_id:p,event_category:"learning",identity:a,exercise_id:s,exercise_type:o,code:i,command:d,output_type:e.output.type,output_payload:e.output.payload}}),P.a.Observable.empty()},qe=(e,t,n)=>e.concatMap(e=>((e,t,n)=>{switch(t.type){case F.h:return Fe.setUserSettings(t.entities.user.settings),P.a.Observable.empty();case F.kb:return Ke(t,e,!0);case F.Rb:return We(t,e,n);case F.gb:return Xe(t,e);case F.c:case F.Mb:return He.execute(Oe.c.endpoint.seenCampusTour()).mergeMapTo(P.a.Observable.empty());case F.Kb:return(Object(M.a)(n.location.pathname)?Be:He).execute(Oe.c.endpoint.getSolution({exerciseId:t.exerciseId})).mergeMapTo(P.a.Observable.empty());case F.Gb:return(Object(M.a)(n.location.pathname)?Be:He).execute(Oe.c.endpoint.getHint({exerciseId:t.exerciseId})).mergeMapTo(P.a.Observable.empty());default:return P.a.Observable.empty()}})(t,e,n).catch(()=>P.a.Observable.empty())),Je=Ie.a.exercises.VIDEO_EXERCISE,Ve=Object(Ee.d)(),ze=Object(Ee.a)(),Ye=Object(Ee.e)(),Qe=P.a.Observable.empty(),Ze=(e,t)=>ze.execute(Oe.c.endpoint.getChapterProgress(e),e).filterOnSucceedRequest().map(e=>({type:t,data:e.data.body})).catch(()=>P.a.Observable.of({type:t,data:{}})),$e=(e,t,n)=>e.ofType(F.F).distinctUntilChanged(R.a).switchMap(e=>P.a.Observable.forkJoin(Ze(e,F.fc),(Object(M.a)(n.location.pathname)?Ye:ze).execute(Oe.c.endpoint.getExercises(e.courseRef,e.chapterRef,{language:u.Xb(t.getState()),authorizationHeader:void 0}),e).concatMapOnSucceedRequest(async n=>{const r=u.F(t.getState()).toObject(),a=e.chapters.find(t=>e.chapterRef===t.get("slug")||Number(e.chapterRef)===Number(t.get("id"))),s=a&&a.get("id");if(Ce()(s)){const e=ve()(n.data.body);Object.assign(n.data.body,await Object(ke.a)(r,s,e))}return n}).map(t=>({...t,injection:e.injection})).concat(P.a.Observable.of(F.Be({chapterRef:e.chapterRef,chapters:e.chapters}),F.Ee({index:e.exIndex}))).toArray().catch(e=>P.a.Observable.of(e))).mergeMap(e=>P.a.Observable.from(we()(e)))),et=(e,t,n,r)=>{const a=(e,t)=>e.ofType(F.jb).filter(()=>!u.nc(t.getState())).concatMap(e=>{const n=t.getState(),{appName:r}=c.a,a=u.S(n).get("type"),s=u.F(n).get("private"),o=u.Oc(n).get("id"),i=u.N(n).get("id")||u.S(n).get("id"),d=u.Cb(n),l=u.Jc(n),p=(e=>{let{eventProperties:t,isCoursePrivate:n,isUserEnabledForAiErrorExplanation:r,results:a}=e;const s=a.some(e=>"error"===e.type||"r-error"===e.type||"parse-error"===e.type||"try-error"===e.type);if(r&&!n&&s){const e=a.filter(e=>{const t="sct"===e.type&&e.payload.correct;return"sct"!==e.type||t});return window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - AI Error Explanation Shown",heap_event_properties:t}),e}return a})({eventProperties:{app_id:r,event_category:"learning",identity:o,exercise_id:i,exercise_type:a},isCoursePrivate:s,isUserEnabledForAiErrorExplanation:l,results:e.results});return((e,t,n,r,a,s)=>{const o=u.F(t).get("private"),c=u.Kc(t),i=e.results.some(e=>"sct"===e.type&&!e.payload.correct);c&&!o&&i&&window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - AI Incorrect Submission Shown",heap_event_properties:{app_id:r,event_category:"learning",identity:a,exercise_id:s,exercise_type:n}})})(e,n,u.U(n),r,o,i),P.a.Observable.from(p).concatMap(e=>Object(U.a)(d,e,a))}).takeUntil(e.ofType(F.ab,F.Nb,F.y));return e.ofType(F.y).do(()=>r.next(a)).concatMapTo(Qe)},tt=(e,t,n)=>e.ofType(F.t).concatMap(e=>We(F.te(e.submitSettings),t,n).merge(P.a.Observable.of(F.Oc({...e,isLastExercise:u.Rb(t.getState()).isEmpty()})))),nt=(e,t)=>e.ofType(F.n).concatMap(e=>{const n=t.getState(),r=u.zc(n);return!r.isEmpty()&&e.isLastExercise&&r.reduce((e,t)=>e&&t.getIn(["completed","completed"]),!0)?P.a.Observable.of(F.Nc({...e,submitSettings:{}})):Qe}),rt=(e,t,n)=>e.ofType(F.m).concatMap(e=>{const r=t.getState(),a=u.cb(r),s=u.kc(r),o=u.Ob(r).nextExercise,c=u.S(r).get("type"),i=(a.chapter.completed||a.course.completed)&&s,d=u.v(r),l=u.F(r).get("id"),p=x()(e.submitSettings)?P.a.Observable.of():We(F.te(e.submitSettings),t,n);let g=P.a.Observable.of();if(i?g=g.concat(p,Ve.execute(Oe.c.endpoint.window({type:"chapter_completed",chapter_id:d,course_id:l}),F.Vc())):(c!==Je||e.show)&&(g=g.merge(p,P.a.Observable.of(F.ie({type:"none"})))),c===Je&&!e.show){if(i)return g.concat(P.a.Observable.of(F.Nc({...e,show:!0}))).catch(()=>Qe);g=g.merge(p),Object(_e.f)(n,o)}return g.catch(()=>Qe)}),at=(e,t,n)=>e.ofType(F.B).flatMap(e=>{const r=u.S(t.getState()).get("id");return ze.execute(Oe.c.endpoint.submitExerciseRating(r,{rating:e.rating,extraInfo:e.extraInfo})).do(()=>{je()(e.nextPath)||Object(_e.f)(n,e.nextPath)}).catch(()=>Qe)}),st=(e,t)=>e.ofType(F.z).flatMap(e=>{const n=u.u(t.getState()).get("id");return ze.execute(Oe.c.endpoint.submitRating(n,{rating:e.rating,extraInfo:e.extraInfo})).concat(e.onFinish({rating:e.rating})).catch(()=>Qe)}),ot=(e,t)=>e.ofType(F.Vb).filter(e=>(e=>{let{action:t,store:n,validActiveKey:r}=e;if(t.activeKey!==r)return!1;const a=n.getState();if("sql"===u.Cb(a))return!0;const s=u.S(a).get("type");if(void 0!==Object(De.a)(s))return!0;switch(s){case"TabConsoleExercise":case"MarkdownExercise":return!0;default:return!1}})({action:e,store:t,validActiveKey:"slides"})).mapTo(F.le({modal:u.e.SLIDES})),ct=e=>e.ofType(F.ac).combineLatest(e.ofType(F.db),(e,t)=>({...e,callback:t.callback})).do(e=>{e.callback([e.output])}).concatMapTo([]),it=e=>{let{history:t,nextPath:n,state:r}=e;const a=u.y(r).get("type"),s=u.Hb(r),o=je()(n)?u.Qb(r):n;switch(s){case"failure":return[F.le({modal:{...u.e.LTI_FAILURE}})];case"pending":return[];case"inactive":case"success":default:return"screen"===a?[F.pe({show:!0})]:(Object(_e.f)(t,o),[])}},ut=(e,t,n)=>e.ofType(F.tb).concatMap(()=>{const e=t.getState();return u.vb(e)?it({state:e,history:n}):[]}),dt=(e,t,n)=>e.ofType(F.Z).concatMap(()=>{const e=t.getState();if("singleExercise"===Object(u.Eb)(e)){const t=Object(u.S)(e).get("id");return Object(Me.a)(t),P.a.Observable.empty()}const r=(e=>u.Ob(e).nextExercise)(e);return[F.de(r),...it({state:e,history:n,nextPath:r})]}),lt=(e,t)=>e.pipe(Object(Pe.c)(F.G),Object(Ne.tap)(()=>{const e=t.getState();if("singleExercise"!==Object(u.Eb)(e))return;const n=u.S(e);n.get("type")===Je&&Object(Me.a)(n.get("id"))}),Object(Ne.ignoreElements)());var pt=n(35),gt=n.n(pt),bt=n(125),ft=n(189);const mt=Object(Ee.d)(),St=(e,t)=>e.ofType(F.G).concatMap(e=>{var n,r;const a=t.getState(),s=u.v(a),o=u.F(a),c=u.cb(a);return(null===(n=c.chapter)||void 0===n?void 0:n.completed)||(null===(r=c.course)||void 0===r?void 0:r.completed)?((e,t,n)=>{const r=bt.a[n.get("technology_id")],a=!n.get("paid");return mt.execute(Oe.c.endpoint.getCompletedChapterCount(),e).concatMapOnSucceedRequest(e=>(1===e.data.body.completed_chapter_count&&Object(ft.c)(t,r,a),P.a.Observable.empty())).catch(e=>(gt.a.captureException(e,{extra:{extraInfo:JSON.stringify(e)}}),P.a.Observable.empty()))})(e,s,o):P.a.Observable.empty()}),ht=Object(Ee.a)(),yt=Object(Ee.e)(),Ot=a.a.STATUS,Et=(e,t,n)=>e.ofType(F.u).mergeMap(e=>P.a.Observable.forkJoin(Ze(e,F.Zb),(Object(M.a)(n.location.pathname)?yt:ht).execute(Oe.c.endpoint.getExercises(e.courseRef,e.chapterRef,{language:u.Xb(t.getState()),authorizationHeader:void 0}),e).filterOnSucceedRequest().map(t=>F.Ge({chapterRef:e.chapterRef,exercises:t.data.body})).catch(e=>P.a.Observable.of(e))).map(e=>{const t=e[0];return{...e[1],progress:x()(t.data)?[]:t.data}})),_t=(e,t,n)=>e.ofType(F.F).distinctUntilChanged(R.a).switchMap(e=>(Object(M.a)(n.location.pathname)?yt:ht).execute(Oe.c.endpoint.getCourseProgress(e),e).filter(e=>e.requestStatus===Ot.SUCCESS).map(e=>F.De({data:e.data.body})).catch(()=>P.a.Observable.of(F.De({data:{}})))),It=()=>e=>t=>{if(t.type===F.O){const e=()=>{};ht.execute(Oe.c.endpoint.resetProgress(t)).do(e,e,()=>{window.location=t.redirection}).subscribe(e)}return e(t)},Tt=e=>t=>n=>{if(n.type===F.pc){const r=e.getState(),a=u.u(r),{dispatch:s}=e,{chapterRef:o,courseRef:c}=Object(_e.d)(n.pathname),i=Number(n.query.ex)-1;let d=c===r.getIn(["course","slug"])||Number(c)===r.getIn(["course","id"]);d=!0;const l=o===a.get("slug")||Number(o)===a.get("id"),p=i===r.getIn(["exercises","current"]);return d&&l&&!p?s(F.Ee({index:i})):d&&!l?(s(F.Ee({index:null})),s(F.fd({chapterRef:o,courseRef:c,chapters:r.getIn(["course","chapters"]),exIndex:i,injection:{language:u.Cb(r)}}))):d?t(n):console.error("should never happens")}return t(n)},vt=e=>e.ofType(F.xb).map(()=>F.Hc()),xt=e=>e.pipe(Object(Pe.c)(F.h,F.Ob),Object(Ne.delay)(36e5),Object(Ne.map)(()=>F.Gd())),wt=(e,t)=>e.ofType(F.nc).distinctUntilChanged(R.a).do(()=>{const e=u.ac(t.getState()).get("ex"),n=u.cc(t.getState()).get("ex");je()(e)||n===e||O()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stopPolling()})}).switchMap(e=>Object(_e.e)(u.Gb(t.getState()).get("pathname"))?P.a.Observable.of(F.Qe({...e}),F.Id({force:!0}),F.Jd(),F.gd()):P.a.Observable.of(F.gd()));var Rt=n(300);const Ct=(e,t,n)=>e.ofType(F.C).concatMap(e=>{const r=t.getState(),a=u.N(r),s=u.S(r),o=a.size>0,c=o?a.get("feedbackMessages"):s.get("user").get("feedbackMessages"),i=o?a.get("id"):s.get("id"),d=u.F(r).get("id"),l=Object(M.a)(n.location.pathname),p=u.Db(r),g=null!=p||l?Object(Rt.a)({courseId:d,submission:p}):p,b=c.find(e=>e.isActive),f="HINT"===b.messageType?"hint":"sct",m={exerciseId:i,userFeedback:e.userFeedback,lastSubmission:g,rating:e.rating,ratingType:f,extraInfo:b.body};return Object(Ee.a)().execute(Oe.c.endpoint.postFeedback(m),e).catch(e=>P.a.Observable.of(e))}),At=(e,t,n)=>e.ofType(F.D).concatMap(e=>{const r=t.getState(),a=u.S(r),s=u.Db(r),o=u.F(r).get("id"),c=Object(M.a)(n.location.pathname),i=null!=s||c?Object(Rt.a)({courseId:o,submission:s}):s,d={id:a.get("id"),category:e.category,extra_info:e.userFeedback,last_submission:i};return Object(Ee.a)().execute(Oe.c.endpoint.postFeedbackIssue(d),e).catch(e=>P.a.Observable.of(e))}),jt=(e,t)=>e.ofType(F.Ib).concatMap(()=>{const e=t.getState(),n=u.v(e),r=u.F(e).get("id"),a=u.Xb(e);return Object(Ee.d)().execute(Oe.c.endpoint.window({type:"paywall",chapter_id:n,course_id:r,locale:a}),F.Vc()).concatMapOnSucceedRequest(e=>P.a.Observable.of({...e,blockInteraction:!0})).catch(()=>P.a.Observable.empty())});var Pt=n(875),Nt=n.n(Pt),Dt=n(216);const kt=new Nt.a(c.a.urls.timetracker,"campus"),Mt=e=>e.ofType(F.h).filter(e=>e.entities.user.status===u.h.LOGIN).do(e=>{const t=e.entities.user.settings.id;kt.setUserId(t)}).concatMapTo([]),Ut=(e,t,n)=>e.ofType(F.cc,F.h).filter(()=>Object(Dt.b)(u.Fc(t.getState()).toJS())).filter(()=>!Object(M.a)(n.location.pathname)).do(()=>{const e=t.getState(),n=u.F(e).get("id"),r=u.u(e).get("id"),a=u.S(e).get("id");kt.startTracking(n,r,a)}).concatMapTo(P.a.Observable.empty()),Lt=kt.manuallyActiveSubject;window.addEventListener("message",e=>{if(null==e.origin)return;if(!(e.origin.endsWith("datacamp.com")||e.origin.endsWith("localhost")))return;null!=e.data&&"UPDATE_TIME"===e.data.type&&Lt.next()});const{STATUS:Ft,getStatus:Ht}=a.a,Bt=(e,t)=>e.ofType(Ht(F.v,Ft.SUCCESS)).switchMap(e=>{var n;const{body:r}=e.data,a=t.getState(),{id:s,technology_id:o,time_needed_in_hours:c,title:i,topic_id:d,xp:l}=u.F(a).toJS(),p=bt.a[o],g=null===(n=r.url)||void 0===n?void 0:n.includes("end_reached");g&&Object(ft.b)({courseId:s,title:i,courseXp:l,technology:p,time_needed_in_hours:c,topic_id:d});let b=P.a.Observable.of(F.ie({type:r.type,url:r.url,meta:r.meta,isCourseEndReached:g}));switch(r.type){case"dialog":b=b.concat(P.a.Observable.of(F.le({modal:{...u.e.IFRAME,url:r.url,meta:r.meta,onExit:e.blockInteraction?()=>{}:null}})))}return b});var Gt=n(876);const Kt=e=>Array.isArray(e)?e.some(e=>U.b.includes(e.type)):U.b.includes(e.type),Wt=e=>({...e,payload:"string"===typeof e.payload?Object(Gt.a)(e.payload):e.payload}),Xt=e=>{let t;return e.ofType(F.db).combineLatest(e.ofType(F.w),e.ofType(F.y),e=>e).do(e=>{if(t){const e=t;requestAnimationFrame(()=>e.unsubscribe())}const n=Object(N.a)();n&&(t=n.subscribeToOutputs(Kt,(e=>t=>{const n=Array.isArray(t)?t:[t];e.callback(n.map(Wt))})(e)))}).concatMapTo(P.a.Observable.empty())};var qt=n(191);const Jt=Object(qt.a)(),Vt=e=>{83===Number(e.keyCode)&&(e.metaKey||e.ctrlKey)&&e.preventDefault()},zt=(e,t,n)=>e.ofType(F.E).scan((e,r)=>{const a=Object(M.a)(n.location.pathname),s=r.status,o=e===u.a.NONE.code&&s===u.a.READY.code,c=t.getState(),i=u.xb(c);return o&&!a&&Jt.increment("le_count_exercise_session_ready",{isPyodideBackendEnabled:i},1),s},"none").concatMapTo([]),Yt=(e,t,n)=>(document.removeEventListener("keydown",Vt),document.addEventListener("keydown",Vt,!1),e.ofType(F.E).filter(e=>u.a.BROKEN.code===e.status).do(e=>{const r=t.getState(),{appName:a}=c.a,s=u.Lb(r),o=e.message,i=u.F(r),d=u.u(r),l=u.S(r),p=Object(M.a)(n.location.pathname),g=u.xb(r),b=g?"Pyodide":"Multiplexer";e.message||gt.a.captureException(e.error,{level:"info",extra:{url:window.location.href}}),null!=window.heap&&window.heap.track(b+" Session Crash",{appName:c.a.appName,chapterId:d.get("id"),courseId:i.get("id"),courseState:i.get("state"),exerciseId:l.get("id"),exerciseType:l.get("type"),exerciseVersion:l.get("version")||"v0",isTeachPreview:p?"true":"false",language:u.Cb(r),multiplexerUrl:s,reason:o,runtimeConfig:u.ec(r)}),p||Jt.increment("le_count_crashed_sessions",{appName:a,message:o,courseId:i.get("id"),isPyodideBackendEnabled:g},1)}).concatMapTo([]));const Qt=(e,t)=>e.ofType(F.y).switchMap(t=>{let{language:n,timestamp:r}=t;return e.ofType(F.E).filter(e=>u.a.READY.code===e.status).map(e=>{let{timestamp:t}=e;return{time:(null!==t&&void 0!==t?t:(new Date).getTime())-r,language:n}}).take(1)}).do(e=>{let{language:n,time:r}=e;const a=function(e,t){const n=t.getState(),r=u.xb(n),a={appName:c.a.appName,language:e,isPyodideBackendEnabled:r},s=u.ec(t.getState());(function(e){return null!=e&&e.includes("gpu")})(s)&&(a.runtimeConfig=s);const o=u.Cc(t.getState());return function(e){return null!=e&&[17].includes(e)}(o)&&(a.technologyId=o),a}(n,t);Jt.observeDistribution("le_time_workspace_to_be_ready",a,r)}).concatMapTo([]),Zt=(e,t,n)=>e.ofType(F.cb).exhaustMap(t=>{let{language:n,timestamp:r}=t;return e.ofType(F.jb).timestamp().map(e=>{let{timestamp:t}=e;return{time:t-r,language:n}}).take(1).takeUntil(e.ofType(F.y))}).do(e=>{let{language:r,time:a}=e;if(Object(M.a)(n.location.pathname))return;const s=t.getState(),o=u.xb(s),i=u.F(s).get("id");Jt.observeDistribution("le_time_to_submit_code",{appName:c.a.appName,language:r,isPyodideBackendEnabled:o},a);a>=18e4||Jt.observeDistribution("campus__time_to_submit_code",{language:r,courseId:"python"===r?i:void 0},a)}).concatMapTo([]),$t=(e,t,n)=>e.ofType(F.D).do(()=>{Jt.increment("le_count_report_sent",{appName:c.a.appName,isTeachPreview:Object(M.a)(n.location.pathname)},1)}).concatMapTo([]),en=Object(Ee.d)(),tn=Ie.a.exercises.VIDEO_EXERCISE,nn=(e,t,n)=>{const r=()=>{const e=t.getState(),r=u.Ob(e).nextExercise;return[F.de(r),...it({state:e,history:n,nextPath:r})]};return e.ofType(F.Y).switchMap(()=>{var n;const a=t.getState(),s=Object(u.S)(a);if("singleExercise"===Object(u.Eb)(a))return s.get("type")!==tn&&Object(Me.a)(s.get("id")),P.a.Observable.empty();const o=null===(n=u.S(a))||void 0===n?void 0:n.get("type"),c=u.cb(a),i=u.kc(a),d=(c.chapter.completed||c.course.completed)&&i;return o===tn&&d?e.ofType(F.Db).take(1).switchMap(r):r()})},rn=(e,t,n)=>e.ofType(F.Qb).concatMap(e=>{let{code:r,correct:a,message:s,xp:o}=e;const c=t.getState(),i=u.zb(c)?We({message:s,code:r,correct:a,xp:o},t,n):P.a.Observable.of(F.le({modal:u.e.LOGIN}));if(!a)return i;const d=u.cb(c),l=u.kc(c);if((d.chapter.completed||d.course.completed)&&l){const e=u.v(c),t=u.F(c).get("id");return i.merge(en.execute(Oe.c.endpoint.window({type:"chapter_completed",chapter_id:e,course_id:t}),F.Vc()).catch(()=>[F.ie({type:"none"})]))}return i.merge([F.ie({type:"none"})])});var an=n(33),sn=n.n(an),on=n(255),cn=n.n(on),un=n(357),dn=n.n(un),ln=n(210),pn=n.n(ln),gn=n(64),bn=n.n(gn),fn=n(34),mn=n(386),Sn=e=>{let{message:t,originalError:n=null}=e;const r=new Error(t);return r.originalError=n,r};var hn=n(246),yn=n.n(hn),On=n(209),En=n(153),_n=n(84);var In=e=>{let{authorizationHeader:t,courseRef:n,isPreview:r,language:a=fn.a,preFetchedData:s}=e;const o=s.get("course");switch(o.get("status")){case En.a.SUCCESS:return Promise.resolve(o.get("data"));case En.a.FAILED:return Promise.reject(Sn({message:o.get("data")}));default:return(r?Object(Ee.e)():Object(Ee.a)()).execute(Oe.c.endpoint.getCourse(encodeURIComponent(n),{language:a,authorizationHeader:t})).toPromise().then(e=>{let{body:t}=e;return{...t,programming_language:Object(_n.mapLanguageName)(t.programming_language),...r?{id:n}:{}}}).catch(e=>Promise.reject(function(e){const t=sn()(e,"error.status",null),n=sn()(e,"error.response.text",null),r=400===t&&null!=n&&n.includes("Course is locked");return Sn({message:r||404===t?On.a.COURSE_NOT_FOUND:On.a.UNKNOWN,originalError:e})}(e)))}};var Tn=n(877);var vn=n(47);const xn={courseProgress:null,chapterProgress:null,streakInfo:void 0};var wn=n(150),Rn=n.n(wn);const Cn=Object(qt.a)(),{appName:An}=c.a,jn=(e,t,n)=>{var r;const a=null!==(r=null===e||void 0===e?void 0:e.status)&&void 0!==r?r:"none",s=null!=(null===t||void 0===t?void 0:t.timeout),o=["none",200,400,403,404,500,502,503,504].includes(a)?a.toString():"untracked";Cn.increment("count_failed_auth_call",{appName:An,status_code:o,timeout:s.toString(),attempt:n.toString()},1)};const Pn=["R","Python","SQL"];var Nn=n(67);const Dn=e=>e.slug||e.id,kn=e=>fe()(e)&&!x()(e),Mn=async e=>{try{return{data:await e,type:"ok"}}catch(t){return{error:t,type:"error"}}},Un=e=>e.ofType(F.f).switchMap(async e=>{var t,n;const r={},{authorizationHeader:a,chapterRef:s,courseRef:o,isPreview:i,language:d,originalLocation:l,queryParams:p}=e,g=pn()(sn()(e,["queryParams","ff"],null),kn);let b;try{b=parseInt(e.queryParams.ex,10)}catch(ee){b=1}const f=In({isPreview:i,courseRef:o,preFetchedData:e.preFetchedData,language:d,authorizationHeader:a}),m=(async e=>{let{chapterRef:t,courseAsPromise:n,preFetchedData:r}=e;const a=r.get("chapter");switch(a.get("status")){case En.a.SUCCESS:return Promise.resolve(a.get("data"));case En.a.FAILED:return Promise.reject(Sn({message:a.get("data")}));default:{const e=await n;let r;return r=je()(t)?yn()(e.chapters):_()(e.chapters,e=>e.id.toString()===t||e.slug===t),je()(r)?Promise.reject(Sn({message:On.a.CHAPTER_NOT_FOUND})):r}}})({courseAsPromise:f,chapterRef:s,preFetchedData:e.preFetchedData}),S=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,exerciseProgrammingLanguageOverride:a,isPreview:s,language:o,preFetchedData:c}=e;const i=c.get("exercises");switch(i.get("status")){case u.g.SUCCESS:return Promise.resolve(i.get("data"));case u.g.FAILED:return Promise.reject(Sn({message:i.get("data")}));default:{const e=s?Object(Ee.e)():Object(Ee.a)(),c=await r,i=await n;return e.execute(Oe.c.endpoint.getExercises(c.id,i.id,{language:o,authorizationHeader:t})).toPromise().then(e=>{let{body:t}=e;return t.map(e=>{const t=a||e.programming_language||c.programming_language;return{...e,language:t,randomNumber:Math.random()}})}).then(e=>Object(ke.a)(c,i.id,e)).catch(e=>Promise.reject(Sn({message:u.b.UNKNOWN,originalError:e})))}}})({exerciseProgrammingLanguageOverride:p.programming_language,isPreview:i,courseAsPromise:f,chapterAsPromise:m,preFetchedData:e.preFetchedData,language:d,authorizationHeader:a}),h=(async e=>{let{authorizationHeader:t,courseAsPromise:n,preFetchedData:r}=e;const a=r.get("courseImages");switch(a.get("status")){case u.g.SUCCESS:return a.get("data");case u.g.FAILED:return Promise.reject(a.get("data"));default:{const e=await n,r=await Object(Ee.b)().execute(Oe.c.imbEndpoints.getCourseImages({courseId:e.id,authorizationHeader:t})).pipe(Object(Ne.timeout)(5e3)).toPromise().then(e=>{let{body:t}=e;return t});return Oe.a.parse(r)}}})({courseAsPromise:f,preFetchedData:e.preFetchedData,authorizationHeader:a}),y=(async e=>{let{courseAsPromise:t,preFetchedData:n}=e;const r=n.get("workspaceTemplate");switch(r.get("status")){case En.a.SUCCESS:return Promise.resolve(r.get("data"));default:try{const e=await t;try{const{body:t}=await ce.a.getWorkspaceTemplate({courseId:e.id});return{_tag:"template",...t}}catch(a){return Pn.includes(bt.a[e.technology_id])?{_tag:"course",courseId:e.id,title:"Course Notes: "+e.title}:null}}catch(ee){return null}}})({courseAsPromise:f,preFetchedData:e.preFetchedData}),O=(async e=>{let{preFetchedData:t}=e;const n=t.get("categoryPages");return n.get("status")===u.g.SUCCESS?Promise.resolve(n.get("data")):ce.f.getCategoryPageSlugsAndFacets().then(e=>Object(mn.a)(e.body).categoryPages).catch(e=>Promise.reject(Sn({message:"Failed to get category page data: "+e})))})({preFetchedData:e.preFetchedData}),E=(async e=>{let{preFetchedData:t}=e;const n=t.get("translatedCourses");if(n.get("status")===u.g.SUCCESS)return Promise.resolve(n.get("data"));const r=(await ce.d.getTranslatedCourses().then(e=>Object(mn.a)(e.body)).catch(e=>Promise.reject(Sn({message:"Failed to get translated courses: "+e})))).reduce((e,t)=>{let{course_id:n,language:r,status:a}=t;if("live"!==a)return e;const s=r.split("-")[0].toLowerCase();return void 0===e[n]?e[n]=[s]:e[n].includes(s)||(e[n]=[...e[n],s]),e},{});return null!==r&&void 0!==r?r:null})({preFetchedData:e.preFetchedData});let I,T,v,w,C;c.a.isServerSideRendering?(I=Promise.resolve(void 0),T=Promise.resolve(!1),v=Promise.resolve({courseProgress:void 0,chapterProgress:void 0,streakInfo:void 0}),w=Promise.resolve(void 0),C=Promise.resolve(null)):(I=Rn.a.get(c.a.serviceUrls.mainApp+"/api/users/signed_in").withCredentials().set("Accept","application/json").set("X-Requested-With","XMLHttpRequest").retry(1,(e,t)=>{jn(t,e,1)}).timeout({response:15e3}).then(e=>{let{body:t}=e;return t}).then(e=>({settings:{...e,has_active_subscription:e.active_products.some(e=>e.startsWith("learn.")),multiplexerUrl:c.a.urls.multiplexer},status:vn.a.LOGIN})).catch(e=>{const t=Math.random().toString(36).slice(2);return"status"in e&&401===e.status?{settings:{multiplexerUrl:c.a.urls.multiplexer,email:"visitor_"+t,authentication_token:"visitor_token_"+t},status:vn.a.UNAUTHORIZED}:(jn(e,e,2),{settings:{multiplexerUrl:c.a.urls.multiplexer,email:"visitor_"+t,authentication_token:"visitor_token_"+t},status:vn.a.ERROR})}),T=(async e=>{let{chapterAsPromise:t,courseAsPromise:n,isPreview:r,skipLtiCheck:a}=e;if(r||a)return!1;const s=await n;if(!s.lti_only)return!1;const o=await t;return Object(Ee.d)().execute(Oe.c.endpoint.ltiIsActive({courseId:s.id,chapterId:o.id})).toPromise().then(()=>!1).catch(()=>!0)})({isPreview:i,skipLtiCheck:"1"===e.queryParams.skip_lti_check,courseAsPromise:f,chapterAsPromise:m}),v=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,isPreview:a,userAsPromise:s}=e;if(a)return xn;if((await s).status===vn.a.UNAUTHORIZED)return xn;const o=await r,c=await n;return Promise.all([Object(Ee.a)().execute(Oe.c.endpoint.getCourseProgress({courseRef:o.id,authorizationHeader:t})).toPromise(),Object(Ee.a)().execute(Oe.c.endpoint.getChapterProgress({authorizationHeader:t,courseRef:o.id,chapterRef:c.id})).toPromise(),Object(Ee.d)().execute(Oe.c.endpoint.getStreak()).toPromise().catch(()=>({body:void 0}))]).then(e=>{let[{body:t},{body:n},{body:r}]=e;return{courseProgress:t,chapterProgress:n,streakInfo:r}}).catch(()=>xn)})({authorizationHeader:a,isPreview:i,userAsPromise:I,courseAsPromise:f,chapterAsPromise:m}),w=async function(e){let{courseAsPromise:t,overwrittenFeatureFlags:n,userAsPromise:r}=e;const a=await r;let s,o=null,c=!1;null!=a&&a.status===vn.a.LOGIN&&(o=a.settings.id,c=a.settings.has_active_subscription);try{s=(await t).id}catch(ee){s=null}return Object(Nn.b)({userId:o,hasActiveSubscription:c,courseId:s,overrides:n}).catch(()=>{})}({userAsPromise:I,courseAsPromise:f,overwrittenFeatureFlags:g}),C=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,exerciseNumber:a,exercisesAsPromise:s,isPreview:o,language:c,preFetchedData:i}=e;const d=i.get("learningRecap");switch(d.get("status")){case u.g.SUCCESS:return Promise.resolve(d.get("data"));case u.g.FAILED:return Promise.reject(d.get("data"));default:{var l;const e=await r,i=Object(Ee.a)();if(o)return Promise.resolve(null);const u=await s;let d=a;cn()(a-1,u.length)||(d=1);const p=null===(l=u.find(e=>e.number===d))||void 0===l?void 0:l.id;if(void 0===p)return Promise.resolve(null);const g=await n;return i.execute(Oe.c.endpoint.getCourseLearningRecap({authorizationHeader:t,courseId:e.id,nextExerciseId:p,language:Object(fn.e)(c)})).toPromise().then(t=>{let{body:n}=t;const r=Oe.b.parse(n);if(null==r)return null;const a=new Date,s=new Date(r.lastActiveDate),o=Object(Tn.a)(s,a,c);return{summary:r.summary,nextLessonGoal:r.nextLessonGoal,derivedCourseContentId:r.derivedCourseContentId,lastActive:o,chapterNumber:g.number,chapterTitle:g.title,courseTitle:e.title,lastActiveDate:s}}).catch(t=>{var n,r;const a=null!==(n=null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.status)&&void 0!==n?n:0;var s,o;a>=500&&gt.a.captureMessage("Error handling learning recap "+(null!==(s=null===t||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)&&void 0!==s?s:""),{extra:{error:t,course_id:e.id,next_exercise_id:p,status:a}});return Promise.resolve(null)})}}})({authorizationHeader:a,courseAsPromise:f,chapterAsPromise:m,exerciseNumber:b,exercisesAsPromise:S,isPreview:i,preFetchedData:e.preFetchedData,language:d}));const A=await Mn(f),j=await Mn(m),P=await Mn(S);"ok"!==P.type||cn()(b-1,P.data.length)||(b=1);const N=await Mn(y),D=await Mn(C),k=await Mn(h),M=await Mn(I),U="ok"===M.type?null===(t=M.data)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.id:null;c.a.isServerSideRendering||null==U||gt.a.setUserContext({id:""+U});const L=await Mn(T),H=await Mn(v),B=await Mn(O),G=await Mn(E);if(await Mn(w),"error"===A.type)return r.course={status:u.g.FAILED,data:A.error.message},F.Gc({error:A.error.message,originalError:A.error.originalError,preFetchedData:r});const K=A.data;if(r.course={status:u.g.SUCCESS,data:K},"error"===j.type)return r.chapter={status:u.g.FAILED,data:j.error.message},F.Gc({error:j.error.message,originalError:j.error.originalError,preFetchedData:r});const W=j.data;if(r.chapter={status:u.g.SUCCESS,data:W},r.workspaceTemplate={status:u.g.SUCCESS,data:"ok"===N.type?N.data:null},r.categoryPages={status:u.g.SUCCESS,data:"ok"===B.type?B.data:null},r.translatedCourses={status:u.g.SUCCESS,data:"ok"===G.type?G.data:null},c.a.isServerSideRendering||(r.learningRecap={status:u.g.SUCCESS,data:"ok"===D.type?D.data:null}),"error"===P.type)return r.exercises={status:u.g.FAILED,data:P.error.message},F.Gc({error:P.error.message,originalError:P.error.originalError,preFetchedData:r});const X=P.data;if(r.exercises={status:u.g.SUCCESS,data:X},"error"===L.type)return F.Gc({error:u.b.UNKNOWN,originalError:L.error,preFetchedData:r});if(L.data)return F.Gc({error:u.b.LTI_NOT_ACTIVE,originalError:null,preFetchedData:r});if("error"===H.type)return F.Gc({error:u.b.UNKNOWN,originalError:H.error,preFetchedData:r});const{chapterProgress:q,courseProgress:J,streakInfo:V}=H.data;if("error"===k.type)return F.Gc({error:u.b.UNKNOWN,originalError:k.error,preFetchedData:r});const z=k.data;if(r.courseImages={status:u.g.SUCCESS,data:z},"error"===M.type)return F.Gc({error:u.b.UNKNOWN,originalError:M.error,preFetchedData:r});const Y=M.data;let Q=null;const Z={chapterRef:Dn(W),courseRef:Dn(K)},$=Object(_e.b)(Z,{isPreviewMode:e.isPreview,prependCampusSubfolder:!c.a.isServerSideRendering&&window.location.pathname.startsWith("/campus/")});return l.pathname===$&&R()({ex:b.toString()},l.params)&&c.a.isProductionDomain()||(Q=["https://campus.datacamp.com",d===fn.a?"":"/"+d,$,"?ex="+b].join("")),F.ue({courseId:K.id,chapterId:W.id,exerciseNumber:b,language:d,learningRecap:"ok"===D.type?D.data:null,entities:{images:z,course:K,exercises:X,user:Y,workspaceTemplate:"ok"===N.type?N.data:null,courseProgress:J,chapterProgress:q,streakInfo:V},pathname:$,queryParams:{...dn()(e.queryParams,["ff"]),...x()(g)?{}:{ff:g},ex:String(b)},canonical:Q,preFetchedData:r})}),Ln=e=>e.ofType(F.g).filter(e=>e.error===u.b.UNKNOWN).do(e=>{let{originalError:t}=e;je()(t)||gt.a.captureException(t)}).concatMapTo([]),Fn=(e,t,n)=>e.ofType(F.h).do(e=>{let{pathname:t,queryParams:r}=e;const a=`${t}?${bn.a.stringify(r)}`,{location:s}=n;a!==`${s.pathname}${s.search}`&&n.replace(a)}).concatMapTo([]),Hn=e=>t=>n=>{if(Array.isArray(n)){const t=n.map(e.dispatch);return null!=t.find(e=>e instanceof Promise)?Promise.all(t):t}return t(n)};var Bn=n(8),Gn=n(878);const Kn=e=>e.ofType(F.h).filter(e=>e.entities.user.status===u.h.LOGIN).switchMap(async e=>{var t,n,r,a;if(0===(null===(t=e.entities)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.settings)||void 0===r||null===(a=r.groups)||void 0===a?void 0:a.length))return Object(F.Ze)(Object(Bn.fromJS)({aiErrorExplanationEnabled:!0,aiSolutionExplanationEnabled:!0}));const s=await Object(Gn.a)();return Object(F.Ze)(Object(Bn.fromJS)(s))});a.a.importRxExtensions()}},[[1812,72,82,77,76,103,96,108,91,99,81,95,111,93,98,102,78,90,100,107,80,92,87,104,89,84,101,88,112,86,97,105,110,106,94,85,109,79,83,49,48,51,50,52]]]);
//# sourceMappingURL=main~cc2efef2.78d4a0b4.chunk.js.map